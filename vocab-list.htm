<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocabulary List</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
            font-size: 2.5em;
        }

        .button-categories {
            margin-bottom: 30px;
        }

        .category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #34495e;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            display: inline-block;
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .vocab-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .vocab-btn:hover {
            background-color: #2980b9;
        }

        .vocab-btn.active {
            background-color: #e74c3c;
        }

        .speed-control-section {
            margin: 30px 0;
            text-align: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #e9ecef;
        }

        .speed-label {
            font-weight: bold;
            color: #495057;
            margin-right: 15px;
            font-size: 16px;
        }

        .speed-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .speed-btn:hover {
            background-color: #5a6268;
        }

        .speed-btn.active-speed {
            background-color: #28a745;
        }

        .study-partner-section {
            margin: 30px 0;
            text-align: center;
            padding: 20px;
            background-color: #e8f4f8;
            border-radius: 8px;
        }

        .study-partner-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }

        .study-partner-btn:hover {
            background-color: #218838;
        }

        .vocab-table-container {
            margin-top: 30px;
            overflow-x: auto;
        }

        .vocab-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }

        .section-header {
            background-color: #ecf0f1;
            font-weight: bold;
            padding: 15px;
            text-align: left;
            font-size: 1.5em;
            color: #2c3e50;
        }

        .vocab-row {
            border-bottom: 1px solid #ddd;
        }

        .audio-controls {
            width: 80px;
            text-align: center;
            padding: 15px 10px;
            vertical-align: top;
        }

        .content-cell {
            padding: 15px;
            vertical-align: top;
        }

        .vocab-word {
            font-weight: bold;
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .example-sentence {
            font-size: 1.5em;
            color: #555;
            line-height: 1.5;
        }

        .audio-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            margin: 2px;
            padding: 5px;
            border-radius: 3px;
            transition: background-color 0.3s;
        }

        .audio-btn:hover {
            background-color: #f0f0f0;
        }

        .play-btn {
            color: #27ae60;
        }

        .stop-btn {
            color: #e74c3c;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
           font-size: 20px
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 5px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .partner-selection {
            text-align: center;
        }

        .partner-selection h2 {
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .partners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .partner-card {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
        }

        .partner-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #e9ecef;
            overflow: hidden;
            margin: 0 auto 15px;
        }

        .partner-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .select-partner-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 14px;
        }

        .select-partner-btn:hover {
            background-color: #0056b3;
        }

        /* Study Session Styles */
        .study-session {
            text-align: center;
        }

        .partner-display {
            margin-bottom: 30px;
        }

        .partner-avatar {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background-color: #e9ecef;
            overflow: hidden;
            margin: 0 auto 20px;
        }

        .partner-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .speech-bubble {
            background-color: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 20px;
            border-radius: 10px;
            margin: 0 auto 20px;
            max-width: 500px;
        }

        .current-word {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .current-example {
            font-size: 20px;
            margin-bottom: 15px;
        }

        .bubble-controls {
            margin-bottom: 15px;
        }

        .bubble-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            margin: 0 5px;
            padding: 5px;
            border-radius: 3px;
            transition: background-color 0.3s;
        }

        .bubble-btn:hover {
            background-color: #f0f0f0;
        }

        .bubble-btn.play-btn {
            color: #27ae60;
        }

        .bubble-btn.stop-btn {
            color: #e74c3c;
        }

        .progress-info {
            margin-bottom: 20px;
            font-size: 17px;
            color: #666;
        }

        .navigation-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 17px;
        }

        .nav-btn:hover:not(:disabled) {
            background-color: #0056b3;
        }

        .nav-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .learn-again-btn {
            background-color: #28a745 !important;
        }

        .learn-again-btn:hover {
            background-color: #218838 !important;
        }

        .congratulations {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .congratulations h3 {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 2em;
            }

            .category-buttons {
                justify-content: center;
            }

            .vocab-btn {
                padding: 10px 15px;
                font-size: 13px;
            }

            .audio-controls {
                width: 60px;
                padding: 10px 5px;
            }

            .content-cell {
                padding: 12px;
            }

            .vocab-word {
                font-size: 1.3em;
            }

            .speed-control-section {
                margin: 20px 0;
                padding: 10px;
            }

            .speed-label {
                display: block;
                margin-bottom: 10px;
                margin-right: 0;
            }

            .speed-btn {
                padding: 10px 14px;
                margin: 2px;
                font-size: 13px;
            }

            .partners-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .partner-image {
                width: 60px;
                height: 60px;
            }

            .partner-avatar {
                width: 105px;
                height: 105px;
            }

            .navigation-controls {
                gap: 5px;
            }

            .nav-btn {
                padding: 8px 12px;
                font-size: 15px;
            }

           .modal-content {
    margin: 10px auto;      /* Much smaller margin for mobile */
    padding: 15px;         /* Slightly less padding to save space */
    width: 90%;            /* Nearly full width on mobile */
max-height: 90vh;      /* Don't exceed 90% */
}

            .speech-bubble {
                padding: 15px;
            }

            .current-word {
                font-size: 20px;
            }

            .current-example {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Vocabulary List (2.5)</h1>

        <div class="button-categories">
            <div class="category">
                <div class="category-title">Textbook</div>
                <div class="category-buttons">
                    <button class="vocab-btn" data-category="textbook" data-lesson="textbook1">B3 L4</button>
                    <button class="vocab-btn" data-category="textbook" data-lesson="textbook2">B3 L5</button>
                    <button class="vocab-btn" data-category="textbook" data-lesson="textbook3">B3 L6 (自読)</button>
                </div>
            </div>

            <div class="category">
                <div class="category-title">Magazine</div>
                <div class="category-buttons">
                    <button class="vocab-btn" data-category="magazine" data-lesson="maga1">U2</button>
                    <button class="vocab-btn" data-category="magazine" data-lesson="maga2">U7 (自読)</button>
                    <button class="vocab-btn" data-category="magazine" data-lesson="maga3">U12</button>
                    <button class="vocab-btn" data-category="magazine" data-lesson="maga4">U13 (自読)</button>
                </div>
            </div>

            <div class="category">
                <div class="category-title">核心字彙</div>
                <div class="category-buttons">
                    <button class="vocab-btn" data-category="core" data-lesson="core1">P2 U4</button>
                    <button class="vocab-btn" data-category="core" data-lesson="core2">P2 U5</button>
                    <button class="vocab-btn" data-category="core" data-lesson="core3">P2 U6</button>
                </div>
            </div>
        </div>

        <!-- Speed Control -->
        <div class="speed-control-section">
            <span class="speed-label">Speed:</span>
            <button class="speed-btn" data-speed="1.2">1.2x</button>
            <button class="speed-btn active-speed" data-speed="1.0">1x</button>
            <button class="speed-btn" data-speed="0.8">0.8x</button>
            <button class="speed-btn" data-speed="0.6">0.6x</button>
        </div>

        <!-- Study Partner Section -->
        <div class="study-partner-section">
            <button class="study-partner-btn" id="choosePartnerBtn">
                👬 Choose Your Study Partner (選學伴)
            </button>
        </div>

        <!-- Table -->
        <div class="vocab-table-container">
            <table class="vocab-table" id="vocabTable">
                <tbody id="vocabTableBody">
                    <tr class="no-data">
                        <td colspan="2">Select a lesson to load vocabulary (選擇單元以載入字彙)</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

<!-- Welcome Notice Modal -->
    <div id="welcomeModal" class="modal" style="display: block;">
        <div class="modal-content" style="max-width: 500px;">
            <div style="text-align: center; padding: 10px;">
                <h2 style="color: #2c3e50; margin-bottom: 20px;">📢 Important Notice</h2>
                <div style="text-align: left; font-size: 16px; line-height: 1.8; margin-bottom: 25px;">
                    <p style="margin-bottom: 15px; color: red; text-align: center;"><strong>1. 每次使用請點擊「重新整理(refresh)🔄」以獲取更新！</strong></p>
                    <p style="margin-bottom: 0; text-align: center;">2. 手機有時會更新「文字轉語音」功能，導致🔊無法運作，重開機即可解決。</p>
                </div>
                <button id="welcomeOkBtn" style="background-color: #28a745; color: white; border: none; padding: 12px 40px; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    OK. I got it.
                </button>
            </div>
        </div>
    </div>

    <!-- Partner Selection Modal -->
    <div id="partnerModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closePartnerModal">&times;</span>
            <div class="partner-selection">
                <h2>Choose Your Study Partner</h2>
                <div class="partners-grid">
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner1.jpg" alt="partner 1">
                        </div>
                        <button class="select-partner-btn" data-partner="1">Shawn Mendes</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner2.jpg" alt="partner 2">
                        </div>
                        <button class="select-partner-btn" data-partner="2">Taylor Swift</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner3.jpg" alt="partner 3">
                        </div>
                        <button class="select-partner-btn" data-partner="3">Rosé</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner4.jpg" alt="partner 4">
                        </div>
                        <button class="select-partner-btn" data-partner="4">전원우</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner5.jpg" alt="partner 5">
                        </div>
                        <button class="select-partner-btn" data-partner="5">강태현</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner6.jpg" alt="partner 6">
                        </div>
                        <button class="select-partner-btn" data-partner="6">IU</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner7.jpg" alt="partner 7">
                        </div>
                        <button class="select-partner-btn" data-partner="7">Asa</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner8.jpg" alt="partner 8">
                        </div>
                        <button class="select-partner-btn" data-partner="8">金城武</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner9.jpg" alt="partner 9">
                        </div>
                        <button class="select-partner-btn" data-partner="9">佐藤 健</button>
                    </div>
                    <div class="partner-card">
                        <div class="partner-image">
                            <img src="partner10.jpg" alt="partner 10">
                        </div>
                        <button class="select-partner-btn" data-partner="10">初音ミク</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Study Session Modal -->
    <div id="studyModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeStudyModal">&times;</span>
            <div class="study-session">
                <div class="partner-display">
                    <div class="partner-avatar" id="currentPartnerAvatar">
                        <img src="partner1.jpg" alt="partner 1">
                    </div>
                    <div class="speech-bubble" id="speechBubble">
                        <div class="current-word" id="currentWord">Select a lesson first!</div>
                        <div class="current-example" id="currentExample">Please choose a lesson from the main page before starting your study session.</div>
                        <div class="bubble-controls">
                            <button class="bubble-btn play-btn" id="speakCurrentBtn">🔊</button>
                            <button class="bubble-btn stop-btn" id="stopCurrentBtn">⏹</button>
                        </div>
                    </div>
                </div>
                <div class="progress-info" id="progressInfo">
                    Ready to start!
                </div>
                <div class="navigation-controls" id="navigationControls">
                    <button class="nav-btn" id="backBtn">← Back</button>
                    <button class="nav-btn" id="nextBtn">Next →</button>
                    <button class="nav-btn" id="nextSectionBtn">Next Section</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Built-in database - can be expanded
        const vocabDatabase = {
            textbook1: [
  {
    "section": "◎Paragraph 1",
    "words": [
      {
        "word": "deceased (adj) (已故的):",
        "example": "He inherited the house from his deceased grandmother. (他從已故的祖母那裡繼承了房子。)"
      },
      {
        "word": "loved one(s) (n) (摯愛的人、親愛的人):",
        "example": "She misses her loved ones who live far away. (她想念那些住在遠方的摯愛之人。)"
      },
      {
        "word": "accompany someone (to a place) (v) (陪同某人前往某處):",
        "example": "Will you accompany me to the doctor's office? (你可以陪我去看醫生嗎？)"
      },
      {
        "word": "a holiday celebration (n) (節日慶祝活動):",
        "example": "A holiday celebration is being planned for the end of the year. (一個節日慶祝活動正在為年底籌劃。)"
      },
      {
        "word": "scare someone to death (phr) (把某人嚇得要死):",
        "example": "The loud thunder scared him to death. (巨大的雷聲把他嚇得要死。)"
      },
      {
        "word": "at least (phr) (至少):",
        "example": "You should at least try to finish the first chapter. (你至少應該試著完成第一章。)"
      },
      {
        "word": "make your hair stand on end (phr) (讓你毛骨悚然):",
        "example": "The scary story made my hair stand on end. (那個恐怖故事讓我毛骨悚然。)"
      },
      {
        "word": "make an egg stand on end (phr) (讓雞蛋立起來):",
        "example": "It's a tradition to make an egg stand on end during the Dragon Boat Festival. (在端午節時，讓雞蛋立起來是一個傳統。)"
      },
      {
        "word": "essential (adj) (必要的、不可或缺的):",
        "example": "Water is essential for survival. (水對於生存是不可或缺的。)"
      },
      {
        "word": "the concept behind… (n) (…背後的概念):",
        "example": "The concept behind the movie is very interesting. (這部電影背後的概念非常有趣。)"
      },
      {
        "word": "celebrate (v) (慶祝):",
        "example": "They will celebrate their anniversary next month. (他們將在下個月慶祝他們的周年紀念日。)"
      },
      {
        "word": "rather than (conj) (而不是):",
        "example": "I prefer tea rather than coffee. (我比較喜歡茶，而不是咖啡。)"
      },
      {
        "word": "mourn (v) (哀悼):",
        "example": "The family gathered to mourn the loss of their pet. (這家人聚在一起哀悼他們的寵物。)"
      },
      {
        "word": "sorrow (n) (悲傷):",
        "example": "His face was filled with sorrow after the bad news. (聽到壞消息後，他的臉上充滿了悲傷。)"
      },
      {
        "word": "on this joyous occasion (phr) (在這個歡樂的場合):",
        "example": "On this joyous occasion, everyone smiled and laughed. (在這個歡樂的場合，每個人都面帶微笑、開懷大笑。)"
      },
      {
        "word": "family members (n) (家庭成員):",
        "example": "All the family members came home for Thanksgiving. (所有的家庭成員都回家過感恩節了。)"
      },
      {
        "word": "gather (together) for a reunion (v) (團聚):",
        "example": "The cousins gather together for a reunion every summer. (表兄弟姊妹們每年夏天都會團聚。)"
      },
      {
        "word": "in honor of… (phr) (為了紀念…):",
        "example": "They held a party in honor of her retirement. (他們舉辦了一個派對來紀念她退休。)"
      },
      {
        "word": "move on to the afterlife (phr) (前往來世):",
        "example": "It is believed that the souls of the dead move on to the afterlife. (人們相信死者的靈魂會前往來世。)"
      }
    ]
  },
  {
    "section": "◎Paragraph 2",
    "words": [
      {
        "word": "be thought to be… (phr) (被認為是…):",
        "example": "The painting is thought to be from the 17th century. (這幅畫被認為是來自17世紀的。)"
      },
      {
        "word": "originate (v) (起源):",
        "example": "The custom originated centuries ago. (這個習俗起源於幾個世紀前。)"
      },
      {
        "word": "centuries ago (= hundreds of years ago) (phr) (數百年前):",
        "example": "That castle was built centuries ago. (那座城堡是在數百年前建造的。)"
      },
      {
        "word": "nowadays (adv) (現今、如今):",
        "example": "Nowadays, most people use mobile phones. (如今，大多數人使用手機。)"
      },
      {
        "word": "passionate (adj) (熱情的):",
        "example": "He is passionate about cooking. (他對烹飪充滿熱情。)"
      },
      {
        "word": "throughout (+ place) (prep) (遍及…各地):",
        "example": "The news spread throughout the country. (這個消息傳遍了全國各地。)"
      },
      {
        "word": "throughout (+ time) (prep) (在…的整個期間):",
        "example": "It rained throughout the night. (在整個晚上期間都在下雨。)"
      },
      {
        "word": "Traditionally, … (adv) (傳統上,…):",
        "example": "Traditionally, we eat dumplings during the Lunar New Year. (傳統上，我們在農曆新年吃水餃。)"
      },
      {
        "word": "honor (v) (紀念、尊敬):",
        "example": "They held a ceremony to honor the veterans. (他們舉行了一個儀式來紀念退伍軍人。)"
      },
      {
        "word": "whereas (conj) (然而):",
        "example": "Tom is very tall, whereas his brother is quite short. (湯姆很高，然而他的弟弟卻很矮。)"
      },
      {
        "word": "depart (v) (離開、啟程):",
        "example": "The train will depart from the station in ten minutes. (火車將在十分鐘後從車站啟程。)"
      },
      {
        "word": "departed (adj) (已故的):",
        "example": "She thinks about her departed husband often. (她經常想起她已故的丈夫。)"
      },
      {
        "word": "the main focus (n) (主要的焦點):",
        "example": "The main focus of the meeting was the new budget. (會議的主要焦點是新的預算。)"
      },
      {
        "word": "soul (n) (靈魂):",
        "example": "Many religions believe that the soul is immortal. (許多宗教相信靈魂是不朽的。)"
      },
      {
        "word": "be believed to… (phr) (被相信會…):",
        "example": "He is believed to have written over a hundred books. (他被相信寫了超過一百本書。)"
      },
      {
        "word": "return to earth (phr) (返回人間):",
        "example": "According to the legend, the hero will return to earth one day. (根據傳說，這位英雄有一天會返回人間。)"
      },
      {
        "word": "the living members of your family (n) (你的在世家人):",
        "example": "The living members of your family all miss you dearly. (你的在世家人都非常想念你。)"
      },
      {
        "word": "instead of… (phr) (取代…、而不是…):",
        "example": "I'll have water instead of soda. (我會喝水，而不是汽水。)"
      },
      {
        "word": "fear (v) (害怕):",
        "example": "Most children fear the dark. (大多數孩子害怕黑暗。)"
      },
      {
        "word": "spirit (n) (1. 精神):",
        "example": "She has a fighting spirit. (她有戰鬥精神。)"
      },
      {
        "word": "spirit (n) (2.心靈 vs. 肉體):",
        "example": "Try to nourish both your body and your spirit. (試著滋養你的身體和心靈。)"
      },
      {
        "word": "spirit (n) (3. 鬼魂 = ghost):",
        "example": "They say the old house is haunted by a spirit. (他們說那棟老房子被一個鬼魂困擾著。)"
      },
      {
        "word": "anticipate (v) (1.預期、預料 = expect   2.期待 = look forward to...):",
        "example": "We anticipate a strong increase in sales next quarter. (我們預期下個季度銷售額會有強勁的增長。)"
      },
      {
        "word": "arrival (n) (到達):",
        "example": "We waited for the arrival of the special guest. (我們等待著特別來賓的到達。)"
      },
      {
        "word": "purchase (v) (購買):",
        "example": "She decided to purchase a new car. (她決定購買一輛新車。)"
      },
      {
        "word": "necessary items (n) (必需品):",
        "example": "We packed the necessary items for the trip. (我們為這次旅行打包了必需品。)"
      },
      {
        "word": "in advance (phr) (事先):",
        "example": "You should book your tickets in advance. (你應該事先預訂你的票。)"
      },
      {
        "word": "include (v) (包含):",
        "example": "The price includes breakfast. (價格包含早餐。)"
      },
      {
        "word": "decorate (v) (裝飾):",
        "example": "We decorated the room with balloons. (我們用氣球裝飾了房間。)"
      },
      {
        "word": "skull (n) (頭骨):",
        "example": "The drawing showed a human skull. (那張圖畫顯示了一個人類的頭骨。)"
      },
      {
        "word": "bear the name (phr) (帶有…的名字):",
        "example": "The award bears the name of the famous scientist. (這個獎項帶有這位著名科學家的名字。)"
      },
      {
        "word": "tidy (v) (整理):",
        "example": "Please tidy your room before you go out. (在你出去之前，請整理你的房間。)"
      },
      {
        "word": "restore (v) (修復、恢復):",
        "example": "They plan to restore the old monument. (他們計劃修復這座古老的紀念碑。)"
      },
      {
        "word": "grave (n) (墳墓):",
        "example": "A beautiful flower was placed on the grave. (一朵美麗的花被放在墳墓上。)"
      },
      {
        "word": "cemetery (n) (墓地、公墓):",
        "example": "The funeral was held at the local cemetery. (葬禮在當地公墓舉行。)"
      },
      {
        "word": "bury (v) (埋葬):",
        "example": "They decided to bury their dog in the backyard. (他們決定把他們的狗埋在後院。)"
      }
    ]
  },
  {
    "section": "◎Paragraph 3",
    "words": [
      {
        "word": "assemble (v) (聚集、組合):",
        "example": "The students assembled in the hall for the meeting. (學生們聚集在大廳開會。)"
      },
      {
        "word": "altar (n) (祭壇):",
        "example": "A small altar was set up in the living room. (客廳裡設置了一個小祭壇。)"
      },
      {
        "word": "place (v) (放置):",
        "example": "Place the books neatly on the shelf. (將書整齊地放置在架子上。)"
      },
      {
        "word": "as well as (phr) (以及、也):",
        "example": "He brought his phone as well as his wallet. (他帶了他的手機以及他的錢包。)"
      },
      {
        "word": "beverage (n) (飲料):",
        "example": "Hot beverages are served on the flight. (航班上供應熱飲。)"
      },
      {
        "word": "have a preference for… (phr) (偏好…):",
        "example": "She has a preference for classical music. (她偏好古典音樂。)"
      },
      {
        "word": "someone is alive (adj) (某人活著 vs. someone is dead):",
        "example": "I'm relieved to know that he is alive and safe. (得知他活著且安全，我鬆了一口氣。)"
      },
      {
        "word": "a warm reception (n) (熱情的接待):",
        "example": "The travelers received a warm reception from the villagers. (旅行者們受到了村民熱情的接待。)"
      },
      {
        "word": "head to (+ place) (v) (前往某處):",
        "example": "We should head to the airport soon. (我們應該很快就前往機場。)"
      },
      {
        "word": "light a candle (phr) (點燃蠟燭):",
        "example": "We light a candle when the power goes out. (停電時，我們會點燃蠟燭。)"
      },
      {
        "word": "cheerful (adj) (歡快的、高興的):",
        "example": "She has a very cheerful personality. (她有一個非常歡快的個性。)"
      },
      {
        "word": "merry (adj) (歡樂的 = happy):",
        "example": "We wish you a merry Christmas. (我們祝你聖誕快樂。)"
      },
      {
        "word": "feast on... (v) (盡情地吃、享用盛宴):",
        "example": "They feasted on turkey and pie. (他們盡情享用火雞和派。)"
      },
      {
        "word": "the honored souls (n) (受尊敬的靈魂):",
        "example": "A prayer was said for the honored souls. (為受尊敬的靈魂進行了祈禱。)"
      },
      {
        "word": "pray till dawn (phr) (祈禱直到黎明):",
        "example": "In some cultures, people pray till dawn on special nights. (在一些文化中，人們在特殊的夜晚會祈禱直到黎明。)"
      },
      {
        "word": "transform… into… (v) (將…轉變成…):",
        "example": "The artist can transform simple objects into works of art. (這位藝術家可以將簡單的物品轉變成藝術品。)"
      },
      {
        "word": "the normally horrifying graveyard (n) (平常令人恐懼的墓地):",
        "example": "On that night, the normally horrifying graveyard became a place of joy. (在那一晚，平常令人恐懼的墓地變成了一個歡樂的地方。)"
      },
      {
        "word": "a venue of joy and celebration (n) (一個歡樂和慶祝的場所):",
        "example": "The park was turned into a venue of joy and celebration for the festival. (為了這個節日，公園被變成了一個歡樂和慶祝的場所。)"
      },
      {
        "word": "the entire night (n) (整個晚上 = the whole night):",
        "example": "We talked and laughed the entire night. (我們聊了笑了一整個晚上。)"
      }
    ]
  },
  {
    "section": "◎Paragraph 4",
    "words": [
      {
        "word": "cartoon-like representations of the dead (n) (卡通式的亡者形象):",
        "example": "Cartoon-like representations of the dead are often used in this festival. (卡通式的亡者形象經常被用於這個節日。)"
      },
      {
        "word": "skeleton (n) (骷髏):",
        "example": "The human skeleton has 206 bones. (人體骷髏有206塊骨頭。)"
      },
      {
        "word": "flag (n) (旗子):",
        "example": "They raised the national flag at the ceremony. (他們在儀式上升起了國旗。)"
      },
      {
        "word": "dress up in a skeleton costume (phr) (穿上骷髏服裝):",
        "example": "Children like to dress up in a skeleton costume for Halloween. (孩子們喜歡在萬聖節穿上骷髏服裝。)"
      },
      {
        "word": "paint (v) (彩繪、塗色):",
        "example": "She likes to paint landscapes in her free time. (她喜歡在空閒時間彩繪風景。)"
      },
      {
        "word": "resemble (v) (類似於):",
        "example": "The cloud resembled a giant rabbit. (那朵雲類似於一隻巨大的兔子。)"
      },
      {
        "word": "participate in (+ activity) (v) (參與…活動):",
        "example": "Will you participate in the charity run next month? (你下個月會參與慈善跑步活動嗎？)"
      },
      {
        "word": "performance (n) (表演):",
        "example": "The band gave an amazing performance last night. (這個樂隊昨晚給出了一場精彩的表演。)"
      },
      {
        "word": "street parade (n) (街道遊行):",
        "example": "A colorful street parade was held to celebrate the holiday. (為了慶祝這個節日，舉行了一場色彩繽紛的街道遊行。)"
      },
      {
        "word": "mock (v) (嘲弄、模仿取笑):",
        "example": "It's not polite to mock someone's accent. (嘲弄某人的口音是不禮貌的。)"
      },
      {
        "word": "recognize… as… (v) (認可…為…):",
        "example": "The government decided to recognize the group as an official organization. (政府決定認可這個團體為一個官方組織。)"
      },
      {
        "word": "inevitable (adj) (不可避免的 = unavoidable):",
        "example": "Change is inevitable in life. (變化在生活中是不可避免的。)"
      },
      {
        "word": "natural cycle (n) (自然循環):",
        "example": "The change of seasons is part of the natural cycle. (季節的變化是自然循環的一部分。)"
      },
      {
        "word": "would rather (phr) (寧願):",
        "example": "I would rather stay home than go out tonight. (我寧願待在家，也不想今晚出去。)"
      },
      {
        "word": "embrace (v) (1.擁抱  2.接受):",
        "example": "You need to embrace the changes in your life. (你需要接受生活中的變化。)"
      },
      {
        "word": "ignore (v) (忽略):",
        "example": "Don't ignore the warning signs. (不要忽略警告標誌。)"
      },
      {
        "word": "pleasure (n) (快樂、愉悅):",
        "example": "It was a great pleasure to meet you. (很高興見到你。)"
      },
      {
        "word": "the cycle of life (n) (生命的循環):",
        "example": "Birth, growth, and death are all part of the cycle of life. (出生、成長和死亡都是生命循環的一部分。)"
      }
    ]
  },
  {
    "section": "◎Paragraph 5",
    "words": [
      {
        "word": "an annual event (n) (一年一度的活動):",
        "example": "The town fair is an annual event that everyone looks forward to. (這個城鎮博覽會是一個每個人都期待的一年一度的活動。)"
      },
      {
        "word": "a national event (n) (全國性活動):",
        "example": "The election is a national event of great importance. (選舉是一個非常重要的全國性活動。)"
      },
      {
        "word": "bring… together (v) (使…團聚、集合):",
        "example": "Music has the power to bring people together. (音樂有能力使人們團聚。)"
      },
      {
        "word": "host (v) (擔任主人):",
        "example": "Our company will host the conference next year. (我們公司將在明年擔任會議的主人。)"
      },
      {
        "word": "guest of honor (n) (貴賓、主禮嘉賓):",
        "example": "The famous author was the guest of honor at the dinner. (這位著名作家是晚宴上的貴賓。)"
      },
      {
        "word": "non- (prefix) (非):",
        "example": "Non-fiction books are about real events. (非小說類書籍是關於真實事件的。)"
      },
      {
        "word": "Hopefully, … (adv) (希望、但願):",
        "example": "Hopefully, the weather will be nice tomorrow. (希望明天天氣會很好。)"
      },
      {
        "word": "die out (phr) (滅絕、逐漸消失):",
        "example": "Scientists are trying to prevent certain animal species from dying out. (科學家們正試圖阻止某些動物物種滅絕。)"
      },
      {
        "word": "since (conj) (因為 = because):",
        "example": "Since it was raining, we stayed inside. (因為在下雨，我們待在室內。)"
      },
      {
        "word": "accept (v) (接受):",
        "example": "She decided to accept the job offer. (她決定接受這份工作邀約。)"
      },
      {
        "word": "await someone (v) (等待著某人 = wait for someone):",
        "example": "A big surprise awaits him when he gets home. (一個大驚喜正等待著他回家。)"
      },
      {
        "word": "escape (v) (逃離):",
        "example": "They managed to escape from the burning building. (他們設法從燃燒的建築物中逃離。)"
      }
    ]
  }
],
            
            'textbook2': [

],
            'textbook3': [


],
            'maga1': [


],
            'maga2': [
{
"section": "◎World Religions (世界上的宗教)",
"words": [
{"word": "religion (n) (宗教):", "example": "There are many different religions in the world. (世界上有許多不同的宗教。)"},
{"word": "religious (adj) (1.宗教的  2.篤信宗教的、虔誠的):", "example": "She comes from a religious family. (她來自一個虔誠的家庭。)"},
{"word": "Buddhism (n) (佛教):", "example": "Buddhism teaches compassion and peace. (佛教教導慈悲與和平。)"},
{"word": "Buddhist (n/adj) (佛教徒／佛教的):", "example": "Many Buddhists meditate daily. (許多佛教徒每天打坐。)"},
{"word": "Taoism (n) (道教):", "example": "Taoism values harmony with nature. (道教重視與自然的和諧。)"},
{"word": "Taoist (n/adj) (道士／道教的):", "example": "Taoist temples can be found across Taiwan. (台灣各地都能找到道教廟宇。)"},
{"word": "Christianity (n) (基督教):", "example": "Christianity is one of the world’s major religions. (基督教是世界主要宗教之一。)"},
{"word": "Christian (n/adj) (基督徒／基督教的):", "example": "Many Christians attend church on Sundays. (許多基督徒週日去教堂。)"},
{"word": "Islam (n) (伊斯蘭教):", "example": "Islam is practiced by millions around the world. (全世界有數百萬人信奉伊斯蘭教。)"},
{"word": "Islamic (adj) (伊斯蘭的):", "example": "He studies Islamic culture. (他研究伊斯蘭文化。)"},
{"word": "Muslim (n/adj) (穆斯林／穆斯林的):", "example": "Muslims pray five times a day. (穆斯林每天祈禱五次。)"},
{"word": "Judaism (n) (猶太教):", "example": "Judaism has many ancient traditions. (猶太教有許多古老的傳統。)"},
{"word": "Hinduism (n) (印度教):", "example": "Hinduism is the main religion in India. (印度教是印度的主要宗教。)"},
{"word": "Hindu (n/adj) (印度教徒／印度教的):", "example": "Many Hindus celebrate Diwali. (許多印度教徒慶祝排燈節。)"}
]
},
{
"section": "◎Nov. 13—Paragraph 1",
"words": [
{"word": "taboo (n) (禁忌):", "example": "Eating pork is a taboo in some religions. (吃豬肉在某些宗教中是禁忌。)"},
{"word": "101 (n) (入門課程、基礎知識):", "example": "This book is a cooking 101 for beginners. (這本書是給初學者的烹飪入門。)"},
{"word": "avoid (v) (避免):", "example": "He avoids eating meat. (他避免吃肉。)"},
{"word": "certain (adj) (某個、某些):", "example": "Certain foods are not allowed. (某些食物是不被允許的。)"},
{"word": "garlic (n) (大蒜):", "example": "Add garlic for extra flavor. (加點大蒜可以增加風味。)"},
{"word": "onion (n) (洋蔥):", "example": "He chopped the onion into small pieces. (他把洋蔥切成小塊。)"},
{"word": "due to… (phr.) (由於…):", "example": "The flight was canceled due to bad weather. (航班因惡劣天氣取消。)"},
{"word": "religious (adj) (宗教的):", "example": "He follows a strict religious diet. (他遵守嚴格的宗教飲食規範。)"},
{"word": "festival (n) (節慶):", "example": "They celebrate the religious festival together. (他們一起慶祝宗教節日。)"},
{"word": "shape (v) (形塑):", "example": "Culture shapes our values. (文化形塑了我們的價值觀。)"},
{"word": "diet (1.飲食):", "example": "A balanced diet is important. (均衡的飲食很重要。)"},
{"word": "diet (2.節食):", "example": "She’s on a diet to lose weight. (她正在節食減肥。)"},
{"word": "respectful (adj) (尊重的):", "example": "We should be respectful of others’ beliefs. (我們應該尊重他人的信仰。)"},
{"word": "informed (adj) (具知識的、了解情況的):", "example": "Many people are not informed about the disaster. (需多人並不清楚這場災難。)"},
{"word": "global citizen (n) (世界公民):", "example": "Being a global citizen means respecting diversity. (成為世界公民意味著尊重多樣性。)"}
]
},
{
"section": "◎Nov. 13—Paragraph 2",
"words": [
{"word": "Put simply, … (= To put it simply, …) (簡單來說):", "example": "Put simply, water is essential for life. (簡單來說，水對生命至關重要。)"},
{"word": "alcohol (n) (酒精):", "example": "He doesn’t drink alcohol. (他不喝酒。)"},
{"word": "forbidden (adj) (被禁止的):", "example": "Eating pork is forbidden in Islam. (吃豬肉在伊斯蘭教中是被禁止的。)"},
{"word": "prohibit (v) (禁止):", "example": "The law prohibits smoking in public places. (法律禁止在公共場所吸菸。)"},
{"word": "shellfish (n) (甲殼類):", "example": "Some people are allergic to shellfish. (有些人對甲殼類過敏。)"},
{"word": "dairy (n) (乳製品):", "example": "She avoids dairy because she’s lactose intolerant. (她不吃乳製品，因為乳糖不耐。)"},
{"word": "principle (n) (原則):", "example": "Honesty is an important principle. (誠實是一個重要的原則。)"},
{"word": "harm (v) (傷害):", "example": "We must not harm animals. (我們不能傷害動物。)"},
{"word": "non- (prefix) (非…):", "example": "She only buys non-animal products. (她只買非動物製品。)"},
{"word": "encourage (v) (鼓勵):", "example": "Teachers encourage students to ask questions. (老師鼓勵學生提問。)"},
{"word": "vegetarian (n/adj) (素食者／素食的):", "example": "She became a vegetarian for health reasons. (她為了健康成為素食者。)"},
{"word": "vegetarianism (n) (素食主義):", "example": "Vegetarianism is becoming more popular. (素食主義越來越受歡迎。)"},
{"word": "common (adj) (常見的):", "example": "Rice is a common food in Asia. (米飯在亞洲很常見。)"},
{"word": "lifelong (adj) (終身的):", "example": "He made a lifelong commitment to peace. (他終身致力於和平。)"},
{"word": "compulsory (adj) (強制的):", "example": "Wearing a helmet is compulsory. (戴安全帽是強制的。)"},
{"word": "temporary (adj) (暫時的):", "example": "He took a temporary job. (他找了一份臨時工作。)"},
{"word": "voluntary (adj) (自願的):", "example": "Attendance is voluntary. (出席是自願的。)"},
{"word": "instance (n) (例子):", "example": "For instance, some people avoid beef. (例如，有些人不吃牛肉。)"},
{"word": "include (v) (包含):", "example": "The menu includes vegetarian dishes. (菜單包含素食餐點。)"},
{"word": "food item (n) (食物項目):", "example": "Each food item is clearly labeled. (每項食物都清楚標示。)"},
{"word": "cosmetics (n) (化妝品):", "example": "She doesn’t use animal-tested cosmetics. (她不用經動物測試的化妝品。)"},
{"word": "contain (v) (含有):", "example": "This drink contains no sugar. (這飲料不含糖。)"},
{"word": "ingredient (n) (成分):", "example": "Check the ingredients before you buy. (購買前請查看成分。)"},
{"word": "be derived from… (phr.) (源自…):", "example": "The oil is derived from plants. (這種油源自植物。)"}
]
},
{
"section": "◎Nov. 13—Paragraph 3",
"words": [
{"word": "exist (v) (存在):", "example": "Many beliefs exist in different cultures. (不同文化中存在許多信仰。)"},
{"word": "Historically, … (adv) (從歷史上看):", "example": "Historically, people believed the earth was flat. (從歷史上看，人們曾相信地球是平的。)"},
{"word": "come about (phr.) (產生、發生):", "example": "How did this tradition come about? (這項傳統是如何產生的？)"},
{"word": "protect (v) (保護):", "example": "We must protect the environment. (我們必須保護環境。)"},
{"word": "be seen as… (phr.) (被視為…):", "example": "This place is seen as sacred. (這個地方被視為神聖的。)"},
{"word": "sacred (adj) (神聖的):", "example": "The temple is a sacred site. (那座寺廟是神聖的地點。)"},
{"word": "spiritual (adj) (心靈的):", "example": "Meditation is a spiritual practice. (冥想是一種心靈修行。)"},
{"word": "Spiritually, … (adv) (在心靈上):", "example": "Spiritually, she feels connected to nature. (在心靈上，她感覺與自然相連。)"},
{"word": "connect with… (phr.) (與…連結):", "example": "He connects with his faith through prayer. (他透過祈禱與信仰連結。)"},
{"word": "faith (n) (信仰):", "example": "Her faith gives her strength. (她的信仰給予她力量。)"},
{"word": "self-control (n) (自制):", "example": "Fasting requires strong self-control. (禁食需要強大的自制力。)"},
{"word": "offer (v) (提供):", "example": "They offer food to the poor. (他們提供食物給貧困者。)"},
{"word": "a way to (do something) (phr.) (做某事的方法):", "example": "Helping others is a way to show kindness. (幫助他人是展現善意的方法。)"},
{"word": "show respect for… (phr.) (表達對…的尊重):", "example": "We should show respect for other beliefs. (我們應該表達對他人信仰的尊重。)"},
{"word": "requirement (n) (要求、規定):", "example": "There are dietary requirements to follow. (有飲食規定需要遵守。)"},
{"word": "part of… (phr.) (…的一部分):", "example": "Religion is part of their daily life. (宗教是他們日常生活的一部分。)"},
{"word": "someone’s identity (n) (某人的身份認同):", "example": "Faith is a key part of someone’s identity. (信仰是個人身份認同的重要部分。)"}
]
},
{
"section": "◎Nov. 14—Paragraph 1",
"words": [
{"word": "roughly (adv) (大約):", "example": "There are roughly seven billion people on Earth. (地球上大約有七十億人。)"},
{"word": "population (n) (人口):", "example": "The city’s population is growing. (這個城市的人口正在成長。)"},
{"word": "identify as… (phr.) (認為自己是…):", "example": "He identifies as a vegetarian. (他認為自己是素食者。)"},
{"word": "vegetarian food (n) (素食):", "example": "Vegetarian food is healthy and delicious. (素食既健康又美味。)"},
{"word": "widely available (adj phr.) (隨處可得):", "example": "This product is widely available in stores. (這項產品在商店隨處可得。)"},
{"word": "decade (n) (十年):", "example": "He worked there for a decade. (他在那裡工作了十年。)"},
{"word": "More recently, … (adv phr.) (近年來):", "example": "More recently, vegetarianism has become more popular. (近年來，素食主義越來越受歡迎。)"},
{"word": "strengthen (v) (加強):", "example": "Travel strengthens friendships. (旅行能加強友誼。)"},
{"word": "the strengthening of… (n phr.) (…的加強):", "example": "The strengthening of relationships is important. (關係的加強很重要。)"},
{"word": "someone’s relationship with… (phr.) (某人與…的關係):", "example": "He wants to strengthen his relationship with his family. (他想加強與家人的關係。)"},
{"word": "nation (= country) (n) (國家):", "example": "Every nation has its own culture. (每個國家都有自己的文化。)"},
{"word": "increase (v) (增加):", "example": "Tourism has increased in recent years. (近年來旅遊業增加了。)"},
{"word": "tourist (n) (遊客):", "example": "Tourists visit Taiwan for its food. (遊客為了美食造訪台灣。)"},
{"word": "dietary (adj) (飲食的):", "example": "They have special dietary needs. (他們有特殊的飲食需求。)"},
{"word": "demand (n) (需求):", "example": "There’s a high demand for healthy food. (健康食品的需求很高。)"},
{"word": "meet…requirements (phr.) (符合…要求):", "example": "This meal meets religious requirements. (這餐符合宗教要求。)"},
{"word": "challenging (adj) (具挑戰性的):", "example": "Learning a new language is challenging. (學新語言很有挑戰性。)"},
{"word": "local businesses (n) (當地商家):", "example": "Local businesses benefit from tourism. (當地商家因觀光而受益。)"},
{"word": "gradually (adv) (逐漸地):", "example": "The weather is gradually getting colder. (天氣逐漸變冷。)"},
{"word": "adapt (to…) (v) (適應…):", "example": "He quickly adapted to the new environment. (他很快適應了新環境。)"},
{"word": "meet…needs (phr.) (滿足…的需求):", "example": "The hotel meets guests’ needs. (這家飯店能滿足旅客需求。)"},
{"word": "import (v) (進口):", "example": "Taiwan imports food from many countries. (台灣從許多國家進口食品。)"},
{"word": "while (= whereas) (conj.) (而，表示「對比」):", "example": "He likes coffee, while I prefer tea. (他喜歡咖啡，而我喜歡茶。)"},
{"word": "slaughter (v) (屠宰):", "example": "The animals are slaughtered humanely. (這些動物被人道屠宰。)"},
{"word": "slaughterhouse (n) (屠宰場):", "example": "The meat came from a local slaughterhouse. (這些肉來自當地屠宰場。)"},
{"word": "employ (= hire) (v) (雇用):", "example": "The company employs many local workers. (公司雇用了許多當地員工。)"},
{"word": "staff (n) (全體員工，不可數！):", "example": "The staff were friendly and helpful. (員工們親切又樂於助人。)"},
{"word": "technique (n) (技巧):", "example": "He learned new cooking techniques. (他學會了新的烹飪技巧。)"},
{"word": "select (v) (選擇):", "example": "Please select a seat. (請選擇一個座位。)"},
{"word": "select (adj) (精選的):", "example": "They offer select wines. (他們提供精選葡萄酒。)"},
{"word": "location (n) (地點):", "example": "The restaurant has a great location. (這家餐廳地點很好。)"}
]
},
{
"section": "◎Nov. 14—Paragraph 2",
"words": [
{"word": "matter (to someone) (v) (對某人而言重要):", "example": "It doesn’t matter to me. (這對我來說不重要。)"},
{"word": "as (conj.) (隨著…):", "example": "As time passes, we change. (隨著時間流逝，我們改變了。)"},
{"word": "cosmopolitan (adj) (國際化的):", "example": "Taipei is a cosmopolitan city. (台北是一個國際化的城市。)"},
{"word": "increasingly (adv) (日益地):", "example": "People are increasingly concerned about health. (人們日益關心健康。)"},
{"word": "be likely to… (phr.) (有可能…):", "example": "He’s likely to come late. (他可能會遲到。)"},
{"word": "colleague (n) (同事):", "example": "She had lunch with her colleagues. (她和同事一起吃午餐。)"},
{"word": "be aware of… (phr.) (意識到…):", "example": "Be aware of cultural differences. (要意識到文化差異。)"},
{"word": "awkward (adj) (尷尬的):", "example": "There was an awkward silence. (出現了一陣尷尬的沉默。)"},
{"word": "situation (n) (情況):", "example": "The situation is under control. (情況在掌控之中。)"}
]
},
{
"section": "◎Nov. 14—Paragraph 3",
"words": [
{"word": "organize an event (v phr.) (舉辦活動):", "example": "They organized an event for Earth Day. (他們為地球日舉辦了一場活動。)"},
{"word": "make sure (that)… (phr.) (確保…):", "example": "Make sure that everyone is invited. (要確保每個人都被邀請。)"},
{"word": "empathy (n) (同理心):", "example": "Empathy helps us understand others. (同理心能幫助我們了解他人。)"},
{"word": "be considerate of… (phr.) (體諒…):", "example": "Be considerate of others’ feelings. (要體諒他人的感受。)"},
{"word": "someone’s dietary needs (n phr.) (某人的飲食需求):", "example": "We must consider everyone’s dietary needs. (我們必須考量每個人的飲食需求。)"},
{"word": "inclusive (adj) (包容的):", "example": "We want an inclusive environment. (我們希望有一個包容的環境。)"},
{"word": "globally aware (adj) (具全球意識的、有國際觀的):", "example": "Being globally aware means respecting all cultures. (具全球意識意味著尊重所有文化。)"}
]
}
 
],
            'maga3': [
{
"section": "◎Nov. 26—Paragraph 1",
"words": [
{"word": "halo (n) (光環):", "example": "The saint was painted with a bright halo. (這位聖人被畫上明亮的光環。)"},
{"word": "effect (n) (效果、影響):", "example": "The new policy had a positive effect on the economy. (新政策對經濟產生了正面影響。)"},
{"word": "halo effect (n) (光環效應):", "example": "The halo effect makes us think attractive people are smarter. (光環效應讓我們認為外表好看的人更聰明。)"},
{"word": "first impression (n) (第一印象):", "example": "First impressions are important in job interviews. (在求職面試中，第一印象很重要。)"},
{"word": "misleading (adj) (誤導的):", "example": "The advertisement was misleading. (那則廣告具有誤導性。)"},
{"word": "imagine (v) (想像):", "example": "Imagine living on the moon. (想像住在月球上。)"},
{"word": "stylish (adj) (時髦的):", "example": "She always looks stylish. (她總是看起來很時髦。)"},
{"word": "be dressed stylishly (phr.) (穿著時髦):", "example": "He was dressed stylishly for the party. (他為派對打扮得很時髦。)"},
{"word": "confidently (adv) (自信地):", "example": "She spoke confidently in front of the class. (她在全班面前自信地發言。)"},
{"word": "instantly (adv) (立刻):", "example": "He answered instantly. (他立刻回答。)"},
{"word": "positive (adj) (正面的):", "example": "She has a positive attitude toward life. (她對生活抱持正面態度。)"},
{"word": "trait (n) (特徵):", "example": "Honesty is an important personality trait. (誠實是重要的人格特徵。)"},
{"word": "appearance (n) (外表):", "example": "Don’t judge people by their appearance. (不要以外表評斷他人。)"},
{"word": "assume (v) (假設、認為):", "example": "Don’t assume he’s rich because of his clothes. (不要因他的穿著就認為他很有錢。)"},
{"word": "great in other ways (phr.) (在其他方面很棒):", "example": "She’s not perfect, but she’s great in other ways. (她不完美，但在其他方面很棒。)"},
{"word": "discover (v) (發現):", "example": "They discovered a new planet. (他們發現了一顆新行星。)"},
{"word": "psychologist (n) (心理學家):", "example": "The psychologist studies human behavior. (那位心理學家研究人類行為。)"}
]
},
{
"section": "◎Nov. 26—Paragraph 2",
"words": [
{"word": "experiment (n) (實驗):", "example": "They conducted an experiment on memory. (他們進行了一項關於記憶的實驗。)"},
{"word": "military officer (n) (軍官):", "example": "The military officer gave clear orders. (軍官下達了明確的命令。)"},
{"word": "rate someone (v) (評價某人):", "example": "They were asked to rate someone’s performance. (他們被要求評價某人的表現。)"},
{"word": "leadership (n) (領導能力):", "example": "He showed great leadership in the project. (他在這個專案中展現了極佳的領導力。)"},
{"word": "intelligence (n) (智力):", "example": "Her intelligence impressed everyone. (她的聰明才智讓大家印象深刻。)"},
{"word": "be good at… (phr.) (擅長…):", "example": "He is good at math. (他擅長數學。)"},
{"word": "be bad at… (phr.) (不擅長…):", "example": "I’m bad at remembering names. (我不擅長記名字。)"},
{"word": "additionally (adv) (此外):", "example": "Additionally, we need more data. (此外，我們還需要更多資料。)"},
{"word": "once (conj.) (一旦):", "example": "Once you start, don’t give up. (一旦開始，就不要放棄。)"},
{"word": "form an opinion (phr.) (形成看法):", "example": "People often form an opinion quickly. (人們常很快形成看法。)"},
{"word": "be likely to… (phr.) (很可能…):", "example": "He’s likely to win the race. (他很可能會贏得比賽。)"},
{"word": "be unlikely to… (phr.) (不太可能…):", "example": "She’s unlikely to agree. (她不太可能同意。)"},
{"word": "change one’s mind (phr.) (改變主意):", "example": "He changed his mind at the last minute. (他在最後一刻改變了主意。)"}
]
},
{
"section": "◎Nov. 26—Paragraph 3",
"words": [
{"word": "explanation (n) (解釋):", "example": "He gave a clear explanation. (他給出了清楚的解釋。)"},
{"word": "evolve (v) (演化、發展):", "example": "Languages evolve over time. (語言會隨時間演化。)"},
{"word": "efficiency (n) (效率):", "example": "We must improve work efficiency. (我們必須提升工作效率。)"},
{"word": "rely on… (phr.) (依賴…):", "example": "You can rely on me. (你可以依賴我。)"},
{"word": "fill in the blanks (phr.) (填空。blank = 空格):", "example": "Please fill in the blanks on the form. (請在表格上填空。)"},
{"word": "inclination (n) (傾向):", "example": "She has an inclination to help others. (她有幫助他人的傾向。)"},
{"word": "lead to… (phr.) (導致…):", "example": "Too much stress can lead to illness. (壓力太大會導致生病。)"},
{"word": "error (n) (錯誤):", "example": "He made a spelling error. (他拼字錯了。)"},
{"word": "judgment (n) (判斷):", "example": "We trust her judgment. (我們信任她的判斷。)"},
{"word": "studies show that… (phr.) (研究顯示…):", "example": "Studies show that sleep improves memory. (研究顯示睡眠能提升記憶力。)"},
{"word": "attractive (adj) (有吸引力的):", "example": "She has an attractive smile. (她的笑容很有吸引力。)"},
{"word": "be seen as… (phr.) (被視為…):", "example": "He is seen as a hero. (他被視為英雄。)"},
{"word": "capable (adj) (有能力的):", "example": "She’s a capable leader. (她是一位有能力的領導者。)"},
{"word": "even if… (conj.) (即使…):", "example": "I’ll go even if it rains. (即使下雨我也會去。)"},
{"word": "average (1.平均的):", "example": "The average score was 80. (平均分數是80分。)"},
{"word": "average (2.普通的、一般的):", "example": "He’s just an average student. (他只是個普通學生。)"},
{"word": "generally (adv) (一般而言):", "example": "People generally like music. (一般而言，人們都喜歡音樂。)"},
{"word": "favor (v) (偏愛):", "example": "She favors tea over coffee. (她偏愛茶勝於咖啡。)"},
{"word": "consistency (n) (一致性):", "example": "We need consistency in our policy. (我們的政策需要一致性。)"},
{"word": "notice (v) (注意到):", "example": "Did you notice the difference? (你注意到差異了嗎？)"},
{"word": "quality (n) (品質):", "example": "The product’s quality is high. (這產品品質很高。)"},
{"word": "tend to (do something) (phr.) (傾向於…):", "example": "People tend to trust friendly faces. (人們傾向相信親切的臉孔。)"},
{"word": "the rest (of…) (phr.) (其餘的…):", "example": "I’ll do the rest tomorrow. (剩下的我明天做。)"},
{"word": "match (v) (配對、和…相配):", "example": "Her shoes match her dress. (她的鞋子和洋裝很相配。)"}
]
},
{
"section": "◎Nov. 27—Paragraph 1",
"words": [
{"word": "pop up (phr.) (突然出現):", "example": "A message popped up on the screen. (螢幕上突然出現一則訊息。)"},
{"word": "get better treatment (from someone) (phr.) (受到較好的待遇):", "example": "Attractive people often get better treatment. (外表好看的人常受到較好待遇。)"},
{"word": "simply (= just) (adv) (只是):", "example": "He simply didn’t know. (他只是不知道而已。)"},
{"word": "stand out (phr.) (脫穎而出):", "example": "Her red dress made her stand out. (她的紅洋裝讓她脫穎而出。)"},
{"word": "advertising (n) (廣告):", "example": "He works in advertising. (他從事廣告業。)"},
{"word": "celebrity (n) (名人):", "example": "The celebrity attended the event. (那位名人出席了活動。)"},
{"word": "promote (v) (推廣):", "example": "They promoted the new product online. (他們在網路上推廣新產品。)"},
{"word": "product (n) (產品):", "example": "This product sells well. (這項產品銷路很好。)"},
{"word": "transfer… to… (v phr.) (轉移…到…):", "example": "She transferred her skills to a new job. (她把技能應用到新工作上。)"},
{"word": "someone’s positive image (phr.) (某人的正面形象):", "example": "The ad used the celebrity’s positive image. (廣告利用了那位名人的正面形象。)"},
{"word": "sales (n) (銷售量):", "example": "The company’s sales increased. (公司的銷售量上升了。)"},
{"word": "social media (n) (社群媒體):", "example": "The news spread on social media. (這消息在社群媒體上傳開了。)"},
{"word": "a viral post (n) (爆紅貼文):", "example": "Her photo became a viral post. (她的照片成為爆紅貼文。)"},
{"word": "single (adj) (單一的):", "example": "A single mistake can cause problems. (一個小錯誤就可能引起問題。)"},
{"word": "seem like an expert (phr.) (看起來像專家):", "example": "He seems like an expert on fashion. (他看起來像時尚專家。)"},
{"word": "influence (v) (影響):", "example": "His words influenced many people. (他說的話影響了許多人。)"},
{"word": "judge (v) (評斷):", "example": "Don’t judge a book by its cover. (不要以貌取人。)"}
]
},
{
"section": "◎Nov. 27—Paragraph 2",
"words": [
{"word": "be susceptible to… (phr.) (容易受…影響):", "example": "Children are susceptible to cold weather. (小孩容易受冷天氣影響。)"},
{"word": "lessen (v) (減少):", "example": "Exercise can lessen stress. (運動可以減少壓力。)"},
{"word": "form an opinion about (phr.) (對…形成看法):", "example": "We often form an opinion about people quickly. (我們常很快對人形成看法。)"},
{"word": "question (v) (質疑):", "example": "She questioned his decision. (她質疑他的決定。)"},
{"word": "influencer (n) (網紅、影響者):", "example": "The influencer has millions of followers. (那位網紅有上百萬粉絲。)"},
{"word": "reduce (v) (減少):", "example": "We need to reduce waste. (我們需要減少浪費。)"},
{"word": "bias (n) (偏見):", "example": "We should be aware of our bias. (我們應該意識到自己的偏見。)"}
]
},
{
"section": "◎Nov. 27—Paragraph 3",
"words": [
{"word": "in conclusion (phr.) (總之):", "example": "In conclusion, we must stay fair. (總之，我們必須保持公正。)"},
{"word": "avoid (v) (避免):", "example": "Try to avoid making assumptions. (試著避免做假設。)"},
{"word": "be misled by… (phr.) (被…誤導):", "example": "Don’t be misled by appearances. (不要被外表誤導。)"},
{"word": "remain (+ Adj) (v phr.) (保持…):", "example": "Stay calm and remain confident. (保持冷靜與自信。)"},
{"word": "alert (adj) (警覺的):", "example": "Stay alert while driving. (開車時要保持警覺。)"},
{"word": "thoughtful (adj) (深思的、體貼的):", "example": "He is a thoughtful friend. (他是一位體貼的朋友。)"},
{"word": "make judgments (v phr.) (做出判斷):", "example": "We make judgments every day. (我們每天都在做判斷。)"},
{"word": "strive to (do something) (v phr.) (努力去…):", "example": "We should strive to improve ourselves. (我們應該努力讓自己進步。)"},
{"word": "base… on… (v phr.) (根據…):", "example": "You should base your decision on facts. (你應根據事實作決定。)"},
{"word": "merit (n) (優點):", "example": "We should judge people by their merits. (我們應該依優點來評價他人。)"},
{"word": "instead of… (phr.) (而不是…):", "example": "Drink water instead of soda. (喝水而不是汽水。)"},
{"word": "treat (someone) fairly (v phr.) (公平對待某人):", "example": "Everyone should be treated fairly. (每個人都應被公平對待。)"},
{"word": "Hopefully, … (adv) (希望…):", "example": "Hopefully, things will get better. (希望事情會變好。)"},
{"word": "do the same (v phr.) (做同樣的事):", "example": "He smiled, and I did the same. (他笑了，我也跟著笑。)"}
]
}


 ],
            'maga4': [

   
],
            'core1': [


],
            'core2': [


],
            'core3': [


]

        };

        // Partner configurations
        const partners = {
            1: { image: 'partner1.jpg', name: 'Shawn Mendes' },
            2: { image: 'partner2.jpg', name: 'Taylor Swift' },
            3: { image: 'partner3.jpg', name: 'Rosé' },
            4: { image: 'partner4.jpg', name: '전원우' },
            5: { image: 'partner5.jpg', name: '강태현' },
            6: { image: 'partner6.jpg', name: 'IU' },
            7: { image: 'partner7.jpg', name: 'Asa' },
            8: { image: 'partner8.jpg', name: '金城武' },
            9: { image: 'partner9.jpg', name: '佐藤 健' },
           10: { image: 'partner10.jpg', name: '初音ミク' }
        };

        // Study session state
        let currentLessonData = null;
        let currentPartner = null;
        let currentWordIndex = 0;
        let flatWordsList = [];
        let currentSpeech = null;
        let speechRate = 1.0;
        let voices = [];
        let isCompleted = false;

        // Load voices
        function loadVoices() {
            voices = speechSynthesis.getVoices();
            if (!voices.length) {
                const dummy = new SpeechSynthesisUtterance('');
                speechSynthesis.speak(dummy);
                voices = speechSynthesis.getVoices();
            }
        }

        // Get English voice
        function getEnglishVoice() {
            if (!voices.length) loadVoices();
            let voice = voices.find(v => v.name.includes('Samantha')) || 
                       voices.find(v => v.lang === 'en-US');
            return voice || null;
        }

        // Clean text for TTS
        function cleanTextForTTS(text) {
            return text.replace(/\*/g, '')
                      .replace(/\//g, '')
                      .replace(/\([^)]*\)/g, '')
                      .replace(/\[[^\]]*\]/g, '')
                      .replace(/\s+/g, ' ')
                      .trim();
        }

        // Speak text
        function speakText(text) {
            stopSpeech();
            const cleaned = cleanTextForTTS(text);
            if (!cleaned) return;

            const utterance = new SpeechSynthesisUtterance(cleaned);
            utterance.lang = 'en-US';
            utterance.rate = speechRate;

            const voice = getEnglishVoice();
            if (voice) utterance.voice = voice;

            utterance.onend = () => {
                currentSpeech = null;
            };

            currentSpeech = utterance;
            speechSynthesis.speak(utterance);
        }

        // Stop speech
        function stopSpeech() {
            if (speechSynthesis.speaking || speechSynthesis.pending) {
                speechSynthesis.cancel();
            }
            currentSpeech = null;
        }

        // Load vocabulary
        function loadVocabulary(lessonKey) {
            const tableBody = document.getElementById('vocabTableBody');
            const data = vocabDatabase[lessonKey];

            if (!data || data.length === 0) {
                tableBody.innerHTML = '<tr class="no-data"><td colspan="2">No data available. Please wait for updates. (暫無資料，請等待更新)</td></tr>';
                return;
            }

            let html = '';
            data.forEach(section => {
                html += `<tr><td colspan="2" class="section-header">${section.section}</td></tr>`;
                section.words.forEach(item => {
                    const fullText = `${item.word}. ${item.example}`;
                    html += `<tr class="vocab-row">
                        <td class="audio-controls">
                            <button class="audio-btn play-btn" onclick="speakText('${fullText.replace(/'/g, "\\'")}')">🔊</button>
                            <button class="audio-btn stop-btn" onclick="stopSpeech()">⏹</button>
                        </td>
                        <td class="content-cell">
                            <div class="vocab-word">${item.word}</div>
                            <div class="example-sentence">${item.example}</div>
                        </td>
                    </tr>`;
                });
            });

            tableBody.innerHTML = html;
        }

        // Flatten lesson data
        function flattenLessonData(lessonData) {
            const flattened = [];
            lessonData.forEach((section, sectionIndex) => {
                section.words.forEach((word, wordIndex) => {
                    flattened.push({
                        ...word,
                        sectionIndex,
                        sectionTitle: section.section,
                        wordIndex
                    });
                });
            });
            return flattened;
        }

        // Update study session display
        function updateStudySession() {
            if (!currentLessonData || !flatWordsList.length) {
                document.getElementById('currentWord').textContent = 'Select a lesson first!';
                document.getElementById('currentExample').textContent = 'Please choose a lesson from the main page before starting your study session.';
                document.getElementById('progressInfo').textContent = 'Ready to start!';
                return;
            }

            // Restore normal interface if coming back from completion
            if (isCompleted) {
                restoreNormalInterface();
            }

            const currentItem = flatWordsList[currentWordIndex];
            if (!currentItem) return;

            document.getElementById('currentWord').textContent = currentItem.word;
            document.getElementById('currentExample').textContent = currentItem.example;

            const totalWords = flatWordsList.length;
            const progressText = `Word ${currentWordIndex + 1} of ${totalWords} • ${currentItem.sectionTitle}`;
            document.getElementById('progressInfo').textContent = progressText;

            // Update navigation buttons
            updateNavigationButtons();
        }

        // Update navigation buttons based on current state
        function updateNavigationButtons() {
            const backBtn = document.getElementById('backBtn');
            const nextBtn = document.getElementById('nextBtn');
            const nextSectionBtn = document.getElementById('nextSectionBtn');

            if (!flatWordsList.length) return;

            const totalWords = flatWordsList.length;
            const currentItem = flatWordsList[currentWordIndex];

            // Back button
            backBtn.disabled = currentWordIndex === 0;

            // Next button
            nextBtn.disabled = currentWordIndex === totalWords - 1;

            // Next section button
            const isLastSection = currentItem && currentItem.sectionIndex === Math.max(...flatWordsList.map(item => item.sectionIndex));
            nextSectionBtn.disabled = isLastSection;
        }

        // Restore normal interface from completion screen
        function restoreNormalInterface() {
            const speechBubble = document.getElementById('speechBubble');
            const currentItem = flatWordsList[currentWordIndex];

            if (currentItem) {
                speechBubble.innerHTML = `<div class="current-word" id="currentWord">${currentItem.word}</div>
                    <div class="current-example" id="currentExample">${currentItem.example}</div>
                    <div class="bubble-controls">
                        <button class="bubble-btn play-btn" id="speakCurrentBtn">🔊</button>
                        <button class="bubble-btn stop-btn" id="stopCurrentBtn">⏹</button>
                    </div>`;

                // Reattach event listeners
                attachBubbleEventListeners();
            }

            isCompleted = false;
        }

        // Attach event listeners to bubble controls
        function attachBubbleEventListeners() {
            const speakBtn = document.getElementById('speakCurrentBtn');
            const stopBtn = document.getElementById('stopCurrentBtn');

            if (speakBtn) {
                speakBtn.addEventListener('click', handleSpeakCurrent);
            }
            if (stopBtn) {
                stopBtn.addEventListener('click', stopSpeech);
            }
        }

        // Handle speak current word
        function handleSpeakCurrent() {
            const currentItem = flatWordsList[currentWordIndex];
            if (currentItem) {
                const fullText = `${currentItem.word}. ${currentItem.example}`;
                speakText(fullText);
            }
        }

        // Show congratulations screen
        function showCongratulations() {
            const partnerName = partners[currentPartner].name;
            const message = `Fantastic work! You've completed the entire vocabulary list! ${partnerName} is so proud of you!`;

            const speechBubble = document.getElementById('speechBubble');
            speechBubble.innerHTML = `<div class="congratulations">
                    <h3>Congratulations!</h3>
                    <p>${message}</p>
                </div>
                <div class="bubble-controls">
                    <button class="bubble-btn play-btn" id="congratsPlayBtn">🔊</button>
                    <button class="bubble-btn stop-btn" id="congratsStopBtn">⏹</button>
                    <button class="bubble-btn learn-again-btn" id="learnAgainBtn">🔄 Learn Again</button>
                </div>`;

            // Attach event listeners for congratulations screen
            document.getElementById('congratsPlayBtn').addEventListener('click', () => speakText(message));
            document.getElementById('congratsStopBtn').addEventListener('click', stopSpeech);
            document.getElementById('learnAgainBtn').addEventListener('click', restartLesson);

            setTimeout(() => speakText(message), 500);

            document.getElementById('progressInfo').textContent = 'Lesson Complete!';
            isCompleted = true;
            updateNavigationButtons();
        }

        // Check if lesson is completed - FIXED: Only trigger after going past the last word
        function checkCompletion() {
            // Only show completion if we've moved beyond the last word
            if (currentWordIndex >= flatWordsList.length && !isCompleted) {
                showCongratulations();
                // Set index back to last word so we don't go out of bounds
                currentWordIndex = flatWordsList.length - 1;
            }
        }

        // Navigation functions
        function nextWord() {
            if (currentWordIndex < flatWordsList.length - 1) {
                currentWordIndex++;
                updateStudySession();
            } else if (currentWordIndex === flatWordsList.length - 1) {
                // Moving past the last word - show completion
                currentWordIndex++;
                checkCompletion();
            }
        }

        function previousWord() {
            if (currentWordIndex > 0) {
                currentWordIndex--;
                // If coming back from completion state, restore interface
                if (isCompleted) {
                    isCompleted = false;
                }
                updateStudySession();
            }
        }

        function nextSection() {
            const currentSectionIndex = flatWordsList[currentWordIndex].sectionIndex;
            const nextSectionFirstWord = flatWordsList.find(item => item.sectionIndex > currentSectionIndex);
            
            if (nextSectionFirstWord) {
                currentWordIndex = flatWordsList.indexOf(nextSectionFirstWord);
                updateStudySession();
                checkCompletion();
            }
        }

        // Restart lesson from beginning - FIXED: Properly reset state
        function restartLesson() {
            currentWordIndex = 0;
            isCompleted = false;
            updateStudySession();
        }

        // Start study session with selected partner - FIXED: Always reset completion state
        function startStudySession(partnerNumber) {
            const selectedLesson = document.querySelector('.vocab-btn.active')?.getAttribute('data-lesson');
            
            if (!selectedLesson || !vocabDatabase[selectedLesson] || vocabDatabase[selectedLesson].length === 0) {
                alert('Please select a lesson with vocabulary data first! (請先選擇一個已匯入教材內容的單元)');
                return;
            }

            // Initialize session state - ALWAYS reset completion state
            currentPartner = partnerNumber;
            currentLessonData = vocabDatabase[selectedLesson];
            flatWordsList = flattenLessonData(currentLessonData);
            currentWordIndex = 0; // Always start from first word
            isCompleted = false; // Always reset completion state

            // Update partner display
            const partnerInfo = partners[partnerNumber];
            const avatarElement = document.getElementById('currentPartnerAvatar');
            avatarElement.innerHTML = `<img src="${partnerInfo.image}" alt="partner ${partnerNumber}">`;

            // Close partner selection modal and open study session
            document.getElementById('partnerModal').style.display = 'none';
            document.getElementById('studyModal').style.display = 'block';

            updateStudySession();
        }

        // Initialize event listeners
        function initializeEventListeners() {
            // Load voices
            document.body.addEventListener('click', () => loadVoices(), { once: true });

            // Lesson buttons
            const lessonButtons = document.querySelectorAll('.vocab-btn');
            lessonButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    lessonButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const lessonKey = this.getAttribute('data-lesson');
                    loadVocabulary(lessonKey);
                });
            });

            // Speed buttons
            const speedButtons = document.querySelectorAll('.speed-btn');
            speedButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    speedButtons.forEach(b => b.classList.remove('active-speed'));
                    this.classList.add('active-speed');
                    speechRate = parseFloat(this.getAttribute('data-speed'));
                    stopSpeech();
                });
            });

            // Modal controls
            const choosePartnerBtn = document.getElementById('choosePartnerBtn');
            const partnerModal = document.getElementById('partnerModal');
            const studyModal = document.getElementById('studyModal');

            choosePartnerBtn.addEventListener('click', () => {
                partnerModal.style.display = 'block';
            });

            // Close buttons
            document.getElementById('closePartnerModal').addEventListener('click', () => {
                partnerModal.style.display = 'none';
            });

            document.getElementById('closeStudyModal').addEventListener('click', () => {
                studyModal.style.display = 'none';
                stopSpeech();
            });

            // Partner selection buttons
            const selectPartnerBtns = document.querySelectorAll('.select-partner-btn');
            selectPartnerBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const partnerNumber = parseInt(this.getAttribute('data-partner'));
                    startStudySession(partnerNumber);
                });
            });

            // Navigation buttons
            document.getElementById('nextBtn').addEventListener('click', nextWord);
            document.getElementById('backBtn').addEventListener('click', previousWord);
            document.getElementById('nextSectionBtn').addEventListener('click', nextSection);

            // Initial bubble event listeners
            attachBubbleEventListeners();

            // Welcome modal OK button
            document.getElementById('welcomeOkBtn').addEventListener('click', () => {
                document.getElementById('welcomeModal').style.display = 'none';
            });

            // Click outside modal to close
            window.addEventListener('click', (e) => {
                if (e.target === partnerModal) {
                    partnerModal.style.display = 'none';
                }
                if (e.target === studyModal) {
                    studyModal.style.display = 'none';
                    stopSpeech();
                }
            });

            // Cleanup on page unload
            window.addEventListener('beforeunload', () => stopSpeech());
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', initializeEventListeners);
    </script>
</body>
</html>
