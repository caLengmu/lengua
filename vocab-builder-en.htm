<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab Builder</title>
    <style>
        :root {
            --primary: #D33E43;      /* Vibrant Red */
            --secondary: #F8B500;    /* Japanese Amber */
            --accent1: #5D9CEC;      /* Sky Blue */
            --accent2: #77B28C;      /* Matcha Green */
            --accent3: #A06CD5;      /* Purple */
            --dark: #2D2D2A;         /* Charcoal */
            --light: #F8F3E6;        /* Off-white */
            --mid: #888888;          /* Mid Gray */
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--light);
            color: var(--dark);
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.5;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

      .controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px; /* Increased from 20px to 30px for better spacing */
    position: relative; /* Add this to ensure proper positioning context */
    z-index: 1; /* Add this to make sure controls stay above other elements */
}

        .left-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        button {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
        }

        .text-import-btn {
            background-color: var(--secondary);
            color: black;
        }

     

        .start-btn {
            background-color: var(--primary);
            color: white;
            padding: 16px 25px;
            font-size: 25px;
        }

 .multiple-choice-btn {
            background-color: var(--accent3);
            color: white;
            padding: 16px 25px;
            font-size: 25px;
        }

.ai-support-btn {
            background-color: var(--accent1);
            color: white;
            padding: 12px 24px;
            font-size: 18px;
        }

        


      table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    background-color: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    clear: both; /* Add this to ensure the table clears any floated elements */
    display: table; /* Explicitly set to table display */
}

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: var(--dark);
            color: var(--light);
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: rgba(0, 0, 0, 0.03);
        }

        tr:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .speaker-icon {
            cursor: pointer;
            color: var(--secondary);
            margin-left: 8px;
            font-size: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--light);
            width: 90%;
            max-width: 500px;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .modal h2 {
            margin-top: 0;
            color: var(--primary);
            font-size: 1.8rem;
        }

        .prompt {
            font-size: 24px;
            margin: 20px 0;
            color: var(--dark);
            font-weight: bold;
        }

        .answer-input {
            width: 100%;
            padding: 12px;
            font-size: 18px;
            margin-bottom: 15px;
            border: 2px solid var(--mid);
            border-radius: 6px;
            box-sizing: border-box;
        }

        .feedback {
            margin: 15px 0;
            font-size: 25px;
            font-weight: bold;
            min-height: 27px;
        }

        .correct {
            color: var(--accent2);
        }

        .incorrect {
            color: var(--primary);
        }

        .hint {
            color: var(--accent1);
            font-style: italic;
            font-size: 25px;
            margin: 10px 0;
            min-height: 24px;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .submit-btn {
            background-color: var(--primary);
            color: white;
        }

        .speak-btn {
            background-color: var(--accent1);
            color: white;
        }

        .hint-btn {
            background-color: var(--secondary);
            color: var(--dark);
        }

        .answer-btn {
            background-color: var(--accent3);
            color: white;
        }

        .next-btn {
            background-color: var(--accent2);
            color: white;
        }

        .close-btn {
            background-color: var(--mid);
            color: white;
        }

.copy-btn {
    background-color: var(--accent3);
    color: white;
}

        .recording {
            background-color: var(--primary);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .hidden {
            display: none;
        }

        #file-input {
            display: none;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: var(--mid);
            font-style: italic;
        }

        .tts-speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tts-speed-control select {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid var(--mid);
            background-color: white;
            font-size: 14px;
        }

        .tts-speed-control label {
            font-weight: bold;
            color: white;
        }

        .reveal-answer {
            color: var(--primary);
            font-weight: bold;
            font-size: 30px;
            margin: 10px 0;
            min-height: 27px;
        }

.section-header {
    background-color: var(--dark);
    color: var(--light);
    font-weight: bold;
}

.section-header td {
background-color: var(--dark);
    color: var(--light);
    padding: 10px 15px;
}

       /* Text Import Modal Styles - Updated for Button Sets */
/* Updated textarea style to handle larger content */
#text-import-content {
    width: 100%;
    height: 200px; /* Increased height to accommodate more text */
    padding: 12px;
    margin: 15px 0;
    font-size: 14px; /* Slightly smaller font for more content */
    border: 2px solid var(--mid);
    border-radius: 6px;
    box-sizing: border-box;
    resize: vertical;
    white-space: pre-wrap; /* Preserves line breaks and spaces */
    font-family: monospace; /* Monospace font for better alignment */
    overflow-y: auto; /* Add scroll if content exceeds height */
}

/* Make the modal larger to accommodate the expanded content */
#text-import-modal .modal-content {
    max-width: 800px;
    max-height: 90vh; /* Limit maximum height */
    overflow-y: auto; /* Add scroll for very large content */
}

/* Button set styling adjustments */
.preset-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.button-set {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    background-color: rgba(0, 0, 0, 0.02);
}
.button-set h3 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 16px;
    color: var(--dark);
}

.preset-btn {
    margin: 5px;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 14px;
    border: none;
    cursor: pointer;
    font-weight: normal;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.textbook-btn {
    background-color: var(--accent1);
    color: white;
}

.live-btn {
    background-color: var(--accent2);
    color: white;
}

.core-btn {
    background-color: var(--accent3);
    color: white;
}

.other-btn {
    background-color: var(--secondary);
    color: var(--dark);
}

#text-import-content {
    width: 100%;
    height: 100px; /* Reduced height to take up 1/5 of the modal */
    padding: 12px;
    margin: 15px 0;
    font-size: 16px;
    border: 2px solid var(--mid);
    border-radius: 6px;
    box-sizing: border-box;
    resize: vertical;
}

@media (max-width: 600px) {
    .preset-buttons {
        grid-template-columns: 1fr;
    }
}

/* AI Support Modal Styles */
        #ai-support-modal .modal-content {
            max-width: 600px;
        }

        .ai-support-links {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .ai-support-link {
            background-color: var(--accent1);
            color: white;
            text-decoration: none;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-support-link:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            th, td {
                padding: 8px 10px;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .left-controls {
                justify-content: space-between;
                width: 100%;
            }

.right-controls {
                justify-content: space-between;
                width: 100%;
            }


.date-info {
    position: absolute;
    top: 20px;
    right: 20px;
    text-align: right;
    font-size: 14px;
    line-height: 1.6;
    color: var(--dark);
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 15px;
    border-radius: 8px;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column; /* Change to column for vertical display */
    gap: 5px;
    font-weight: bold;
    max-width: 90%; /* Prevent overflow on small screens */
    z-index: 10; /* Ensure it stays above other elements */
}

.date-info span {
    display: flex;
    align-items: center;
    white-space: nowrap; /* Prevent line breaks within each date item */
}

.date-info .emoji {
    margin-right: 8px;
    font-size: 16px;
}

.date-info .countdown {
    color: var(--primary);
    margin: 0 3px;
}

/* Add media queries for mobile responsiveness */
@media (max-width: 768px) {
    .date-info {
        position: static; /* Position in normal flow on mobile */
        margin: 0 auto 15px auto; /* Center it and add margin below */
        width: 100%;
        max-width: 100%;
        text-align: center;
        right: auto;
        top: auto;
    }
    
    .date-info span {
        justify-content: center; /* Center content on mobile */
    }
    
    header {
        display: flex;
        flex-direction: column;
    }
}


            .ai-support-links {
                grid-template-columns: 1fr;
            }
        }

.visitor-counter {
    margin-top: 40px;
    text-align: center;
    padding: 15px;
    color: var(--dark);
    font-size: 16px;
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#visitor-count {
    font-weight: bold;
}

/* Refresh Reminder Popup Styles */
.popup-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.popup-content {
  background-color: white;
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  width: 90%;
  max-width: 500px;
  text-align: center;
}

.popup-layout {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

.pikachu-image {
  width: 150px;
  flex-shrink: 0;
}

.pikachu-image img {
  width: 100%;
  height: auto;
}

.speech-bubble {
  position: relative;
  background-color: #FFFDE7;
  border: 2px solid var(--secondary);
  border-radius: 15px;
  padding: 15px;
  margin-left: 15px;
}

.speech-bubble:before {
  content: "";
  position: absolute;
  left: -15px;
  top: 50%;
  transform: translateY(-50%);
  border-width: 15px 15px 15px 0;
  border-style: solid;
  border-color: transparent var(--secondary) transparent transparent;
}

.speech-bubble:after {
  content: "";
  position: absolute;
  left: -12px;
  top: 50%;
  transform: translateY(-50%);
  border-width: 12px 12px 12px 0;
  border-style: solid;
  border-color: transparent #FFFDE7 transparent transparent;
}

.english-text {
  font-size: 18px;
  font-weight: bold;
  color: var(--primary);
  margin-bottom: 8px;
}

.chinese-text {
  font-size: 16px;
  color: var(--dark);
}

.close-reminder-btn {
  background-color: var(--accent1);
  color: white;
  padding: 12px 24px;
  font-size: 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.close-reminder-btn:hover {
  background-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 5px 8px rgba(0, 0, 0, 0.15);
}

/* Responsive adjustments */
@media (max-width: 600px) {
  .popup-layout {
    flex-direction: column;
  }
  
  .speech-bubble {
    margin-left: 0;
    margin-top: 15px;
  }
  
  .speech-bubble:before, .speech-bubble:after {
    left: 50%;
    top: -15px;
    transform: translateX(-50%) rotate(90deg);
  }
  
  .speech-bubble:after {
    top: -12px;
  }
}

.choice-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 30px 0;
  padding: 20px;
}

.choice-option {
  background-color: white;
  border: 3px solid var(--mid);
  border-radius: 12px;
  padding: 20px;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  min-height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.choice-option:hover {
  border-color: var(--primary);
  background-color: var(--light);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text x="0" y="24" font-size="24">üëÜ</text></svg>'), pointer;
}

.choice-option.selected {
  border-width: 4px;
  font-weight: bolder;
}

.choice-option.correct {
  background-color: var(--accent2);
  color: white;
  border-color: var(--accent2);
}

.choice-option.incorrect {
  background-color: var(--primary);
  color: white;
  border-color: var(--primary);
}

.choice-option.disabled {
  pointer-events: none;
  opacity: 0.7;
}



    </style>
</head>
<body>
    <header>
<div id="date-info" class="date-info"></div>
        <h1>üéØ Vocabulary Builder (2.7)</h1>
    </header>

</div>

    <div class="controls">
    <div class="left-controls">
        


        <button class="text-import-btn" id="text-import-btn">üìù Import Text</button>
    </div>
<button class="multiple-choice-btn" id="multiple-choice-btn" disabled>üöï ÁúãËã±ÈÅ∏‰∏≠</button>
    <button class="start-btn" id="start-btn" disabled>‚úàÔ∏è Áúã‰∏≠Âî∏Ëã±</button>

    <button class="ai-support-btn" id="ai-support-btn">üí° AI Support</button>
</div>

    <table id="vocabulary-table">
        <thead>
            <tr>
                <th>
                    <div class="tts-speed-control">
                        <label for="tts-speed">Vocabulary</label>
                        <select id="tts-speed">
                            <option value="0.8">0.8x</option>
                            <option value="0.6">0.6x</option>                            
                            <option value="1">1x</option>                                                       
                        </select>
                    </div>
                </th>
                <th>Translation</th>
                <th>
                    <label>
                        <input type="checkbox" id="select-all"> Select All
                    </label>
                </th>
            </tr>
        </thead>
        <tbody id="vocabulary-body">
            <tr>
                <td colspan="3" class="no-data">Import your vocabulary list to get started</td>
            </tr>
        </tbody>
    </table>

    <!-- Text Import Modal -->
<div id="text-import-modal" class="modal">
    <div class="modal-content">
        <h2>Import Text</h2>
        
        <!-- Button Sets -->
        <div class="preset-buttons">
            <!-- Textbook Buttons -->
            <div class="button-set textbook-buttons">
                <h3>Textbook</h3>
                <button class="preset-btn textbook-btn" data-preset="b2l7">B2 L7</button>
                <button class="preset-btn textbook-btn" data-preset="b2l8">B2 L8</button>
                <button class="preset-btn textbook-btn" data-preset="b2l9">B2 L9</button>
            </div>
            
            <!-- Live Magazine Buttons -->
            <div class="button-set live-buttons">
                <h3>Live Magazine</h3>
                <button class="preset-btn live-btn" data-preset="liveU71">U7 #1</button>
<button class="preset-btn live-btn" data-preset="liveU72">U7 #2</button>
                <button class="preset-btn live-btn" data-preset="liveU141">U14 #1</button>
<button class="preset-btn live-btn" data-preset="liveU142">U14 #2</button>
                <button class="preset-btn live-btn" data-preset="liveU3">U3</button>
<button class="preset-btn live-btn" data-preset="liveU51">U5 #1</button>
                <button class="preset-btn live-btn" data-preset="liveU52">U5 #2</button>
            </div>
            
            <!-- Ê†∏ÂøÉÂ≠óÂΩô Buttons -->
            <div class="button-set core-buttons">
                <h3>Ê†∏ÂøÉÂ≠óÂΩô</h3>
                <button class="preset-btn core-btn" data-preset="coreU16">U16</button>
                <button class="preset-btn core-btn" data-preset="coreU17">U17</button>
                <button class="preset-btn core-btn" data-preset="coreU18">U18</button>
            </div>
            
            <!-- Other Button -->
            <div class="button-set other-buttons">
                <h3>Other</h3>
                <button class="preset-btn other-btn" data-preset="other1">other 1</button>
<button class="preset-btn other-btn" data-preset="other2">other 2</button>



            </div>
        </div>
        
        <!-- Text Import Field -->
        <textarea id="text-import-content" placeholder="Enter your vocabulary pairs here..."></textarea>
        
<!-- Action Buttons -->
<div class="button-group">
    <button id="text-import-submit-btn" class="submit-btn">Import</button>
    <button id="text-import-copy-btn" class="copy-btn">Copy</button>
    <button id="text-import-clear-btn" class="hint-btn">Clear</button>
    <button id="text-import-close-btn" class="close-btn">Close</button>
</div>        

    </div>
</div>

<!-- AI Support Modal -->
    <div id="ai-support-modal" class="modal">
        <div class="modal-content">
            <h2>üí° AI Support</h2>
            <div class="ai-support-links">
<a href="https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/" class="ai-support-link" target="_blank">üîç ÂäçÊ©ã‰∏≠Ëã±ÈõôËß£Â≠óÂÖ∏</a>
                                              <a href="https://chatgpt.com/share/67fb4661-ab40-800a-91e1-84af81f0382b" class="ai-support-link" target="_blank">üåü ÁîüÊàê‰æãÂè•+‰∏≠Ë≠Ø</a>
 <a href="https://chatgpt.com/share/67da57c1-afa4-800a-956f-41b344ca587c" class="ai-support-link" target="_blank">üí¨ ‰∫íÂãïÂïèÁ≠î</a>
                                <a href="https://tobespecified" class="ai-support-link" target="_blank">‚òï (Êú™ÂÆåÊàê)ÁîüÊàêÊïÖ‰∫ã / Áü≠Êñá</a>
<a href="https://chatgpt.com/share/67f896d4-e3a4-800a-9169-b0f385820e3e" class="ai-support-link" target="_blank">[Quiz] Â°´Á©∫È°å ‚úèÔ∏è</a>
<a href="https://chatgpt.com/share/67f7329b-e008-800a-9c06-df50ec1bb977" class="ai-support-link" target="_blank">[Quiz] ‰∏≠Ë≠ØËã± (ÂÖ•ÈñÄ) üòÉ </a>
<a href="https://chatgpt.com/share/67f619dd-d668-800a-af6e-696897e751e7" class="ai-support-link" target="_blank">[Quiz] ‰∏≠Ë≠ØËã± (Â≠∏Ê∏¨Èõ£Â∫¶) üòñ</a>
<a href="https://tobespecified" class="ai-support-link" target="_blank">(Êú™ÂÆåÊàê)[Quiz] Èñ±ËÆÄÊ∏¨È©ó ‚è≥</a>
            </div>
            <div class="button-group">
                <button id="ai-support-close-btn" class="close-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="modal">
        <div class="modal-content">
            <div id="prompt" class="prompt">Say "<span id="translation-prompt"></span>" in English.</div>
            <input type="text" id="answer-input" class="answer-input" placeholder="Type your answer here...">
            <div id="feedback" class="feedback"></div>
            <div id="hint-text" class="hint"></div>
            <div id="reveal-answer" class="reveal-answer"></div>
            <div class="button-group">
                <button id="submit-btn" class="submit-btn">Submit</button>
                <button id="speak-btn" class="speak-btn">üé§ Speak</button>
                <button id="hint-btn" class="hint-btn">Hint</button>
                <button id="answer-btn" class="answer-btn">üîë Answer</button>
                <button id="next-btn" class="next-btn">Next</button>
                <button id="close-btn" class="close-btn">Close</button>
            </div>
        </div>
    </div>

<div id="multiple-choice-modal" class="modal">
  <div class="modal-content">
    <div id="vocab-word" class="prompt">
      <span id="vocabulary-prompt"></span>
      <span class="speaker-icon" id="vocab-speaker" title="Listen">üîä</span>
    </div>
    
    <div id="choice-options" class="choice-options">
      <!-- ÈÅ∏È†ÖÂ∞áÁî±JavaScriptÂãïÊÖãÁîüÊàê -->
    </div>
    
    <div id="mc-feedback" class="feedback"></div>
    <div id="mc-reveal-answer" class="reveal-answer"></div>
    
    <div class="button-group">
<button id="mc-next-btn" class="next-btn">Next</button>
<button id="mc-close-btn" class="close-btn">Close</button>
</div>
  </div>
</div>
 
    <script>
        // DOM Elements
      
        const textImportBtn = document.getElementById('text-import-btn');
     
        const startBtn = document.getElementById('start-btn');
const aiSupportBtn = document.getElementById('ai-support-btn');
        const vocabularyTable = document.getElementById('vocabulary-table');
        const vocabularyBody = document.getElementById('vocabulary-body');
        const selectAllCheckbox = document.getElementById('select-all');
        const quizModal = document.getElementById('quiz-modal');
        const translationPrompt = document.getElementById('translation-prompt');
        const answerInput = document.getElementById('answer-input');
        const feedbackEl = document.getElementById('feedback');
        const hintTextEl = document.getElementById('hint-text');
        const revealAnswerEl = document.getElementById('reveal-answer');
        const submitBtn = document.getElementById('submit-btn');
        const speakBtn = document.getElementById('speak-btn');
        const hintBtn = document.getElementById('hint-btn');
        const answerBtn = document.getElementById('answer-btn');
        const nextBtn = document.getElementById('next-btn');
        const closeBtn = document.getElementById('close-btn');
        const ttsSpeedSelect = document.getElementById('tts-speed');
        
        // Text Import Modal Elements
        const textImportModal = document.getElementById('text-import-modal');
        const textImportContent = document.getElementById('text-import-content');
        const textImportSubmitBtn = document.getElementById('text-import-submit-btn');
        const textImportCloseBtn = document.getElementById('text-import-close-btn');
const textImportClearBtn = document.getElementById('text-import-clear-btn');

// AI Support Modal Elements
        const aiSupportModal = document.getElementById('ai-support-modal');
        const aiSupportCloseBtn = document.getElementById('ai-support-close-btn');

// Á¨¨ÂõõÊ≠•ÔºöÊñ∞Â¢ûJavaScriptËÆäÊï∏ÂíåDOMÂÖÉÁ¥† (Âú®ÁèæÊúâËÆäÊï∏ÂçÄÂüüÊñ∞Â¢û)
const multipleChoiceBtn = document.getElementById('multiple-choice-btn');
const multipleChoiceModal = document.getElementById('multiple-choice-modal');
const vocabularyPrompt = document.getElementById('vocabulary-prompt');
const vocabSpeaker = document.getElementById('vocab-speaker');
const choiceOptions = document.getElementById('choice-options');
const mcFeedbackEl = document.getElementById('mc-feedback');
const mcRevealAnswerEl = document.getElementById('mc-reveal-answer');
const mcNextBtn = document.getElementById('mc-next-btn');
const mcCloseBtn = document.getElementById('mc-close-btn');

        // Variables
        let vocabularyData = [];
        let currentQuizWords = [];
        let currentWordIndex = -1;
        let currentWord = null;
        let recognition = null;
        let speechRate = 0.8;

// Á¨¨‰∫îÊ≠•ÔºöÊñ∞Â¢ûÂ§öÈÅ∏È°åÁõ∏ÈóúËÆäÊï∏
let currentMCWord = null;
let correctChoice = '';
let selectedChoice = '';

        // Initialize Speech Recognition
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'en-US';
            recognition.continuous = false;
            recognition.interimResults = false;

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript.toLowerCase().trim();
                answerInput.value = transcript;
                speakBtn.textContent = 'üé§ Speak';
                speakBtn.classList.remove('recording');
            };

            recognition.onend = function() {
                speakBtn.textContent = 'üé§ Speak';
                speakBtn.classList.remove('recording');
            };

            recognition.onerror = function(event) {
                console.error('Speech recognition error', event.error);
                speakBtn.textContent = 'üé§ Speak';
                speakBtn.classList.remove('recording');
            };
        }

        // Text-to-Speech function
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = speechRate;
                speechSynthesis.speak(utterance);
            }
        }

        // TTS Speed change handler
        ttsSpeedSelect.addEventListener('change', (e) => {
            speechRate = parseFloat(e.target.value);
        });

// AI Support button click handler
        aiSupportBtn.addEventListener('click', () => {
            aiSupportModal.style.display = 'flex';
        });

        // AI Support Close button click handler
        aiSupportCloseBtn.addEventListener('click', () => {
            aiSupportModal.style.display = 'none';
        });

        // Text Import button click handler
        textImportBtn.addEventListener('click', () => {
            textImportModal.style.display = 'flex';
        });

        // Text Import Close button click handler
        textImportCloseBtn.addEventListener('click', () => {
            textImportModal.style.display = 'none';
        });

// Preset vocabulary data
const presetVocabulary = {

    b2l7: `
‚óéFirst Half (#1-#12)
seek (v)	=Â∞ãÊ±Ç„ÄÅÂ∞ãÊâæ
audience (n)	=ËßÄÁúæ„ÄÅËÅΩÁúæ
series (n)	=Á≥ªÂàó
technology =(n)	ÁßëÊäÄ
worth (adj)	=1.ÂÉπÂÄº‚Ä¶ÁöÑ($) 	2.ÂÄºÂæó‚Ä¶ÁöÑ
found (v)	=ÂâµÁ´ã„ÄÅÂª∫Á´ã
conference (n)	=ÊúÉË≠∞„ÄÅÁ†îË®éÊúÉ
increase (v)	=Â¢ûÂä†„ÄÅÊèêÂçá(v)
organize (v)	=1.ÁµÑÁπî„ÄÅÁ±åËæ¶ „ÄÄ2.Êï¥ÁêÜ„ÄÅÂÆâÊéí
broad (adj)	=1.ÂØ¨ÁöÑ„ÄÄ2.Âª£Ê≥õÁöÑ
range (n)	=1.Á®ÆÈ°û„ÄÅÁ≥ªÂàó „ÄÄ2.ÁØÑÂúç

‚óéSecond Half (#13-#21)
field (n)	=1.Áî∞Èáé„ÄÄ2.È†òÂüü
philosophy =(n)	Âì≤Â≠∏
launch (v) = 	1.ÁôºÂ∞Ñ(È£õÂΩàÁ≠â)	„ÄÄ2.Êé®Âá∫(Áî¢ÂìÅÁ≠â)	„ÄÄ3.ÁôºËµ∑(Ê¥ªÂãïÁ≠â)
collect (v)	=Êî∂ÈõÜ
numerous (adj)	=Ë®±Â§öÁöÑ(Ôºùmany)
celebrity (n)	=Âêç‰∫∫
fascinate (v)	=‰ΩøËëóËø∑
fiction (n)	=Â∞èË™™„ÄÅËôõÊßãÊïÖ‰∫ã
discuss (v)	=Ë®éË´ñ(v)
method (n)	=ÊñπÊ≥ï
‚óéÁâáË™û(Phrases & Idioms)
as well as...	=[ÁâáË™û] ‰ª•Âèä‚Ä¶
for free	=[ÁâáË™û] ÂÖçË≤ª
at present	=[ÁâáË™û] ÁõÆÂâç
give something a try	=[ÁâáË™û] ÂòóË©¶Êüê‰∫ã
broaden your horizons	=[ÁâáË™û] ÊãìÂ±ï‰Ω†ÁöÑË¶ñÈáé

‚óéË©ûÈ°ûËÆäÂåñ(different parts of speech)
technological (adj)	=ÊäÄË°ìÁöÑ
worth (n)	=ÂÉπÂÄº(Ôºùvalue)
a worthy winner	= ‰∏ÄÂÄãÂØ¶Ëá≥ÂêçÊ≠∏ÁöÑË¥èÂÆ∂
The scientist is worthy of respect. = ÈÄô‰ΩçÁßëÂ≠∏ÂÆ∂ÂÄºÂæóÂ∞äÊï¨)
foundation (n)	=1.Âª∫Á´ã„ÄÄ2.Âü∫ÈáëÊúÉ
there is an increase in something = ÊüêÁâ©Â¢ûÂä†‰∫Ü
increasingly (+ Adj) =Ë∂ä‰æÜË∂ä...(+ Adj.)
organizer (n)	=‰∏ªËæ¶‰∫∫
organization (n)	=ÁµÑÁπî„ÄÅÊ©üÊßã
broaden (v)	=Êì¥Â±ï
range from A to B	=ÁØÑÂúçÊ∂µËìãAÂà∞B
collection (n)	=Êî∂ËóèÂìÅ
fascination (n)	=ËëóËø∑(n)
discussion (n)	=Ë®éË´ñ(n)
`,

    b2l8: `


‚óéFirst Half (#1-#10)
exchange (v, n)	=‰∫§Êèõ
expect (v)	=È†êÊúü„ÄÅÈ†êÊñô(v)
shelter (n)	=1.ÈÅøÈõ£ÊâÄ	2.Ë∫≤ÈÅø
fierce (adj)	=1.(Â§©Ê∞£)Âº∑ÁÉàÁöÑ	2.(ÊÉÖÁ∑í)ÊøÄÁÉàÁöÑ
occupy (v)	=‰ΩîÊìöÔºõ‰ΩîÁî®
vehicle (n)	=ËªäËºõ„ÄÅ(Èô∏‰∏ä)‰∫§ÈÄöÂ∑•ÂÖ∑
temporary (adj)	=Êö´ÊôÇÁöÑ
assist (v)	=ÂçîÂä©(Ôºùhelp)
curious (adj)	=Â•ΩÂ•áÁöÑ
origin (n)	=Ëµ∑Ê∫êÔºõ‰æÜÊ∫ê

‚óéSecond Half (#11-#20)
event (n)	=1.‰∫ã‰ª∂	2.Ê¥ªÂãï
elder (n)	=Âπ¥Èï∑ËÄÖ
neighborhood (n)	=Á§æÂçÄ„ÄÅÈÑ∞ËøëÂú∞ÂçÄ
cooperate (v)	=Âêà‰Ωú(v)
arrange (v) 	=1.ÂÆâÊéí„ÄÅÁ±åÁï´	2.Êï¥ÁêÜ„ÄÅÊéíÂàó
relax (v)	=ÊîæÈ¨Ü
contain (v)	=ÂåÖÂê´
stroll (v)	=Êï£Ê≠•(v)
aspect (n)	=ÊñπÈù¢
spirit (n)	=Á≤æÁ•û

‚óéÁâáË™û(idioms & phrases)
take part in‚Ä¶	=[ÁâáË™û]ÂèÉÂä†(Ôºùparticipate in‚Ä¶)
take place	=[ÁâáË™û] (‰∫ã‰ª∂)ÁôºÁîü„ÄÅ(Ê¥ªÂãï)ËàâË°å
come about	=[ÁâáË™û] (ÂïèÈ°å„ÄÅÊÉÖÊ≥ÅÁ≠â)ÁôºÁîü„ÄÅÁî¢Áîü
help out =[ÁâáË™û]Âπ´Âøô
hand out	=[ÁâáË™û]ÂàÜÁôº„ÄÅÁôºÊîæ

‚óéË©ûÈ°ûËÆäÂåñ(different parts of speech)
expectation (n)	=È†êÊúü„ÄÅÊúüÊúõ(n)
shelter (v)	=Â∫áË≠∑„ÄÅÈÅÆËîΩ
occupation (n) 	=1.‰ΩîÈ†ò	2.ËÅ∑Ê•≠
assistant (n)	=Âä©ÁêÜ
assistance (n)	=ÂçîÂä©(n)
curiosity (n)	=Â•ΩÂ•áÂøÉ
originate (v)	=Ëµ∑Ê∫êÊñº‚Ä¶(v)
original (adj)	=ÂéüÂâµÁöÑ
elder (adj)	=ËºÉÂπ¥Èï∑ÁöÑ(Ôºù older)
elderly (adj)	=Âπ¥ËÄÅÁöÑ
cooperation (n)	=Âêà‰Ωú(n)
arrangement (n)	=(n) 1.ÂÆâÊéí 2.Êï¥ÁêÜÊéíÂàó
container (n)	ÂÆπÂô®
stroll (n)	=Êï£Ê≠•(n)
spiritual (adj)	=Á≤æÁ•û‰∏äÁöÑ

`,

    b2l9: `
‚óéFirst Half (#1-#11)
general (adj)	=1.ÊôÆÈÅçÁöÑ„ÄÅÊï¥È´îÁöÑ
general (adj)	=2.‰∏ÄËà¨ÁöÑ„ÄÅÈùûÂ∞àÈñÄÁöÑ
general (adj)=	3.Â§ßËá¥ÁöÑ„ÄÅÁ±†Áµ±ÁöÑ
derive (v)	1.Ëµ∑Ê∫êÊñº„ÄÅ‰æÜËá™
derive (v)	=2.ÂæóÂà∞„ÄÅÁç≤Âèñ
feature (n)	=ÁâπÂæµ„ÄÅÁâπËâ≤
gossip (n)	=ÂÖ´Âç¶„ÄÅÈñíË©±
reveal (v)	=Êè≠Èú≤„ÄÅÈÄèÈú≤(v)
release (v)	=1.ÁôºË°å„ÄÅÁôºÂ∏É(v)
release (v)=	2.ÈáãÊîæ„ÄÅÊéíÊîæ(v)
chase (v)	=ËøΩÈÄê„ÄÅËøΩË∂ï(v)
brand (n)	=ÂìÅÁâå
image (n)	=1.ÂúñÂÉè„ÄÅÂΩ±ÂÉè
image (n)=	2.ÂΩ¢Ë±°
edit (v)	=Á∑®ËºØ(v)
modify (v)	=‰øÆÊîπ(v)

‚óéSecond Half (#12-#19)
digital (adj)	=Êï∏‰ΩçÁöÑ
combine (v)	=ÁµêÂêà„ÄÅÂêà‰Ωµ(v)
standard (adj)	=Ê®ôÊ∫ñÁöÑ
widespread (adj)	=Âª£Ê≥õÁöÑ„ÄÅÊôÆÈÅçÁöÑ
usage (n)	=‰ΩøÁî®„ÄÅÁî®Ê≥ï
constant (adj)	=ÊåÅÁ∫åÁöÑ„ÄÅ‰∏çÊñ∑ÁöÑ
alternative (adj)	=1.Êõø‰ª£ÁöÑ 
alternative (adj)=	2.Âè¶È°ûÁöÑ„ÄÅÈùûÂÇ≥Áµ±ÁöÑ
exist (v)	=Â≠òÂú®(v)

‚óéÁâáË™û(Phrases & Idioms)
in general	= [ÁâáË™û] ‰∏ÄËà¨‰æÜË™™
take on (+ quality)	= [ÁâáË™û] ÈñãÂßãÂÖ∑ÊúâorÂëàÁèæ(ÊüêÁâπË≥™)
later on	= [ÁâáË™û] Âæå‰æÜÔºå‰πãÂæå
in the beginning	= [ÁâáË™û] ‰∏ÄÈñãÂßã„ÄÅËµ∑Âàù
too... to do something	= [ÁâáË™û] Â§™...ËÄåÁÑ°Ê≥ï...
play a... role (in...)	= [ÁâáË™û]  (Âú®...‰∏≠)ÊâÆÊºî...ËßíËâ≤
think up	= [ÁâáË™û] ÊÉ≥Âá∫Ôºà‰∏ªÊÑè„ÄÅË®àÁï´Á≠âÔºâ

‚óéË©ûÈ°ûËÆäÂåñ(different parts of speech) 
feature (v)	=‰ª•‚Ä¶ÁÇ∫ÁâπËâ≤
gossip (v)	=Ë¨õÂÖ´Âç¶„ÄÅÈñíËÅä
release (n)	=ÁôºË°å„ÄÅÁôºÂ∏É(n)
chase (n)	=ËøΩÈÄê„ÄÅËøΩË∂ï(n)
edition (n)	=ÁâàÊú¨
modification (n)	=‰øÆÊîπ(n)
digitally (adv)	=‰ª•Êï∏‰ΩçÊñπÂºè
combination (n)	=ÁµÑÂêà„ÄÅÁµêÂêà(n)
standard (n)	=Ê®ôÊ∫ñ
constantly (adv)	=‰∏çÊñ∑Âú∞„ÄÅÊåÅÁ∫åÂú∞
alternative (n)	=Êõø‰ª£ÊñπÊ°à
existing (adj)	=ÁèæÂ≠òÁöÑ„ÄÅÁõÆÂâçÁöÑ
existence (n)	=Â≠òÂú®(n)

`,

    liveU71: `

‚óéParagraph 1
unexpected	=ÊÑèÊÉ≥‰∏çÂà∞ÁöÑ
hit theaters	=[ÁâáË™û](Âú®Êà≤Èô¢)‰∏äÊò†
lengthy	=ÂÜóÈï∑ÁöÑ„ÄÅÈï∑ÊôÇÈñìÁöÑ
run time	=Êí≠ÊîæÊôÇÈñì
significant	=ÈáçË¶ÅÁöÑ(Ôºùimportant)
emperor	=ÁöáÂ∏ù
leave out	=ÈÅ∫Êºè
‚óéParagraph 2
fort	=Â†°Â£ò
come across...	=ÂÅ∂ÁÑ∂ÁôºÁèæ
carve	=ÈõïÂàª
writing system	=Êõ∏ÂØ´Á≥ªÁµ±
alphabet	 =Â≠óÊØçÁ≥ªÁµ±
script	=1.(ÊüêË™ûË®ÄÁöÑ)ÊñáÂ≠ó(Â¶ÇÔºöLatin script) 	2.ÂäáÊú¨
military officer	=ËªçÂÆò
in charge (of...)	=[ÁâáË™û] Ë≤†Ë≤¨ÁÆ°ÁêÜ
significance	=ÈáçË¶ÅÊÄß(Ôºùimportance)
property	=Ë≤°Áî¢„ÄÅÊâÄÊúâÁâ©
army	=ËªçÈöä„ÄÅÈô∏Ëªç
‚óéParagraph 3
mere	=ÂÉÖÂÉÖ
defeat	=ÊâìÊïó
terms	=(ÂêàÁ¥ÑÁ≠âÁöÑ)Ê¢ùÊ¨æ
sign a treaty	=Á∞ΩË®ÇÊ¢ùÁ¥Ñ
riches (n)	=Ë≤°ÂØå„ÄÅË≤°Áî¢(Ôºùwealth)
place (v)	=ÊîæÁΩÆ(Ôºù put)
ship (v)	=ÈÅãÈÄÅ
remain	=Á∂≠ÊåÅÊüêÁãÄÊÖã
to this day	=[ÁâáË™û] Áõ¥Âà∞‰ªäÂ§©


`,

liveU72: `

‚óéParagraph 1
ancient	=Âè§‰ª£ÁöÑ
century	=‰∏ñÁ¥Ä
die out	=[ÁâáË™û] ÊªÖÁµï„ÄÅÊ∂àÂ§±
scholar	=Â≠∏ËÄÖ
text	=ÊñáÂ≠ó
code	=ÂØÜÁ¢º„ÄÅ‰ª£Á¢º
decode	=Á†¥Ëß£(ÂØÜÁ¢ºÁ≠â)
decipher	=Á†¥Ë≠Ø(Èõ£ÊáÇÁöÑÊñáÂ≠óÊàñÁ¨¶Ëôü)
‚óéParagraph 2
perhaps	=ÊàñË®±(Ôºù maybe)
celebrate	=1.ÊÖ∂Á•ù 	2.ËÆöÊèö(Ôºùpraise)
allow someone to do something	=1.ÂÖÅË®±	2.‰ΩøËÉΩÂ§†(Ôºù enable)
as a result	=ÁµêÊûú„ÄÅÂõ†Ê≠§(Ôºù therefore Ôºù thus)
blossom	=1.ÈñãËä±	2.Ëì¨ÂãÉÁôºÂ±ï
fascinating	=‰ª§‰∫∫ËëóËø∑ÁöÑ
era	=ÊôÇ‰ª£
expand	=Êì¥Â§ß„ÄÅÊì¥Â±ï
‚óéParagraph 3
likely (adv)	=ÂæàÂèØËÉΩÂú∞(Ôºùprobably)
legacy	=1.ÈÅ∫Áî¢ 	2.Áïô‰∏ãÁöÑÂΩ±Èüø
live on	= ÁπºÁ∫åÂ≠òÂú®
in recent years	=ËøëÂπ¥‰æÜ
teach oneself	=Ëá™Â≠∏
educational	=ÊúâÊïôËÇ≤ÊÑèÁæ©ÁöÑ
software	=ËªüÈ´î
in honor of...	=[ÁâáË™û]Âêë‚Ä¶Ëá¥Êï¨
remarkable	=ÂçìË∂äÁöÑÔºõ‰∫Ü‰∏çËµ∑ÁöÑ

`,

    liveU141: `

‚óéParagraphs 1 & 2

battle (n)	=Êà∞È¨•
battle (v)	=Ëàá‚Ä¶Â•ÆÊà∞
rot 	=ËÖêÁàõ
the press =	1.Â†±Âàä 2.Âá∫ÁâàÁ§æ
record (v)	=Ë®òÈåÑ
refer to...	 =ÊåáÁöÑÊòØ‚Ä¶
general  = ‰∏ÄËà¨ÁöÑÔºõÊôÆÈÅçÁöÑ
decline	=Ê∏õÂ∞ëÔºõË°∞ÈÄÄ
mental	=ÂøÉÁêÜÁöÑÔºõÁ≤æÁ•ûÁöÑ
effort	=Âä™Âäõ
among	=Âú®‚Ä¶‰πã‰∏≠
population	=‰∫∫Âè£
digital	=Êï∏‰ΩçÁöÑ
digital age	=Êï∏‰ΩçÊôÇ‰ª£
term	=Áî®Ë™ûÔºõË°ìË™û
value	=ÂÉπÂÄº
content	=ÂÖßÂÆπ
typically	=ÈÄöÂ∏∏Ôºõ‰∏ÄËà¨‰æÜË™™
social media	=Á§æÁæ§Â™íÈ´î
harmful	=ÊúâÂÆ≥ÁöÑ
impact	=ÂΩ±ÈüøÔºõË°ùÊìä
overconsume=	ÈÅéÂ∫¶ÊîùÂèñ/‰ΩøÁî®
screen time	=ÁúãËû¢ÂπïÁöÑÊôÇÈñì
negatively	=Ë≤†Èù¢Âú∞(vs. positively)
function (n)	=ÂäüËÉΩ
function (v)	=ÁôºÊèÆ‰ΩúÁî®ÔºõÈÅã‰Ωú

‚óéParagraph 3
background	=ËÉåÊôØ
focus on...	=Â∞àÊ≥®Êñº...
result in...	=Â∞éËá¥...(ÔºùcauseÔºùlead to‚Ä¶)
similarly	=ÂêåÊ®£Âú∞
adult	=Êàê‰∫∫
news feed	= (Á§æÁæ§Â™íÈ´îÁöÑ)ÂãïÊÖãÊ∂àÊÅØ
over time	 =Èö®ËëóÊôÇÈñìÊé®Áßª„ÄÅÊº∏Êº∏Âú∞
reduce	=Ê∏õÂ∞ë
productivity	=ÁîüÁî¢Âäõ
creativity	 =ÂâµÈÄ†Âäõ
attention span	=Ê≥®ÊÑèÂäõÊåÅÁ∫åÊôÇÈñì

`,

liveU142: `
‚óéParagraph 1
effect	=ÂΩ±Èüø(n) (Ôºùinfluence Ôºùimpact)
permanent	=Ê∞∏‰πÖÁöÑ
method	=ÊñπÊ≥ï
practice	=1.Á∑¥Áøí 	2.ÁøíÊÖ£ÊÄßÂÅöÊüê‰∫ã
mindfulness	= Â∞àÊ≥®Ë¶∫ÂØüÁï∂‰∏ãÁöÑË∫´ÂøÉÊÑüÂèóÔºåÈ°û‰ººÂÜ•ÊÉ≥(‰∏≠ÊñáË≠ØÁÇ∫„ÄåÊ≠£Âøµ„Äç)
involve	=Ê∂âÂèäÔºõÂåÖÂê´
throughout (+ time)=	Âú®Êï¥ÊÆµÊôÇÈñì‰∏≠
throughout (+ place)=	ÈÅç‰ΩàÊï¥ÂÄãÂú∞Èªû
for instance	=Ëàâ‰æã‰æÜË™™(Ôºùfor example)
breathe	=ÂëºÂê∏
calm	=‰ΩøÂπ≥ÈùúÔºõÂÜ∑Èùú
expert	=Â∞àÂÆ∂
recommend	=Êé®Ëñ¶
-free (e.g. sugar-free, carefree, rent-free) =	ÁÑ°...ÁöÑ(Â¶ÇÔºöÁÑ°Á≥ñÁöÑ„ÄÅÁÑ°ÊÜÇÁÑ°ÊÖÆÁöÑ„ÄÅÂÖçÁßüÈáëÁöÑ)

‚óéParagraphs 2 & 3
strategy	=Á≠ñÁï•
take up (+ activity)	=ÈñãÂßãÂæû‰∫ãÊüêÊ¥ªÂãï
technology	=ÁßëÊäÄ
aim to do something	=ÁõÆÊ®ôÊòØ‚Ä¶
replace	=Êõø‰ª£
journal 	=1.Êó•Ë®ò 2.ÊúüÂàä
journaling	=ÂØ´Êó•Ë®ò
board game	=Ê°åÈÅä
adventure	=ÂÜíÈö™
research	=Á†îÁ©∂
significantly	=ÊòéÈ°ØÂú∞ÔºõÈ°ØËëóÂú∞
mood	=ÂøÉÊÉÖ
make a difference	=[ÁâáË™û]Áî¢ÁîüÂΩ±Èüø
aside from...	=Èô§‰∫Ü‚Ä¶‰πãÂ§ñ(Ôºù1.besides... 2.except for‚Ä¶)
make time for...	=ÁÇ∫‚Ä¶È®∞Âá∫ÊôÇÈñì
loved ones	=ÊëØÊÑõÁöÑÂÆ∂‰∫∫/Ë¶™‰∫∫
well-being	=Âπ∏Á¶è„ÄÅÂÆâÂ∫∑
recognize	=1.Ë™çÂá∫ 2.ÊâøË™ç„ÄÅÊé•Âèó(‰∫ãÂØ¶)
risk	=È¢®Èö™
sharp	=1.ÈãíÂà©ÁöÑ„ÄÅÂ∞ñÁöÑ 	2.Á≤æÊòéÊïèÈä≥ÁöÑ

`,


    liveU3: `
migrant	=ÁßªÊ∞ë
attempt (+ to V)	= Ë©¶Âúñ... (Ôºùtry to V)
cross (v)	=Á©øË∂ä
channel	=„ÄÄ1.È†ªÈÅì 2.ÈÄöÈÅì
the English Channel	„ÄÄ=Ëã±ÂêâÂà©Êµ∑Â≥Ω
the Taiwan Strait =  Âè∞ÁÅ£Êµ∑Â≥Ω
journey	=ÊóÖÁ®ã
desperate	=Âõ†ÁµïÊúõËÄå‰∏çÈ°ß‰∏ÄÂàáÁöÑ
port	=Ê∏ØÂè£
passage	=ÈÄöÈÅìÔºõÈÄöÈÅé
fill up the bottle with water	=ÊääÁì∂Â≠êË£ùÊªøÊ∞¥
garage	=ËªäÂ∫´
charge (v)	=ÂÖÖÈõª
cable	=ÈõªÁ∑ö
allow someone to do something	=ÂÖÅË®±Êüê‰∫∫ÂÅöÊüê‰∫ã
homeless	=ÁÑ°ÂÆ∂ÂèØÊ≠∏ÁöÑ
essential	=ÂøÖÈúÄÁöÑ
find directions	=ÊâæÂà∞ÊñπÂêë
stay in touch with... 	=Âíå‚Ä¶‰øùÊåÅËÅØÁπ´
translate	=ÁøªË≠Ø
seek	 =Â∞ãÊ±Ç
generous	=ÊÖ∑ÊÖ®ÁöÑ
affectionate	=Ë¶™ÂàáÁöÑÔºõÊúâÊÑõÂøÉÁöÑ
granny	=Â•∂Â•∂ÔºàÂè£Ë™ûÔºâ
charger	=ÂÖÖÈõªÂô®
be on board with...	=[ÁâáË™û]ÂêåÊÑèÔºõÊîØÊåÅ‚Ä¶
operation	=Ë°åÂãï
shut down	=ÈóúÈñâ
yet	=ÁÑ∂ËÄåÔºõ‰ΩÜ
keep (on) doing something	=ÊåÅÁ∫åÂÅöÊüê‰∫ã
`,

 liveU51: `
Live U5  Shohei Ohtani Â§ßË∞∑ÁøîÂπ≥ May 12 

‚óéBaseball terms (Ê£íÁêÉË°ìË™û)
hitter / batter	=ÊâìÊìäËÄÖ
pitcher	=ÊäïÊâã
a two-run home run	=ÂÖ©ÂàÜÂÖ®Â£òÊâì
steal a base	=ÁõúÂ£ò
season	=ÁêÉÂ≠£

‚óéParagraph 1
dual (adj)	=ÈõôÈáçÁöÑ
mastery (n)	=Á≤æÈÄö(n)
talent (n)	=Â§©Ë≥¶
native (n)	=Êú¨Âú∞‰∫∫
nickname (v)	=Áµ¶‚Ä¶ÂèñÊö±Á®±
major (adj)	=‰∏ªË¶ÅÁöÑ
league (n)	=ËÅØÁõü
make one‚Äôs debut	=ÂàùÁôªÂ†¥„ÄÅÈ¶ñÊºî
celebrate (v)	=ÊÖ∂Á•ù
thanks to...	=Âõ†ÁÇ∫„ÄÅÂ§öËôß(Ôºùbecause of‚Ä¶, due to‚Ä¶)
extend (v)	=Âª∂‰º∏ÔºåÊì¥Â±ï
baseball field = Ê£íÁêÉÂ†¥(vs. basketball court)
on the field	=Âú®Â†¥‰∏ä
off the field = Âú®Â†¥Â§ñ
as well	=‰πü(Ôºùtoo)
successfully (adv)	=ÊàêÂäüÂú∞
balance A with B	=Âπ≥Ë°°AËàáB
demanding (adj)	=ËÄóË≤ªÁ≤æÂäõÁöÑ
career (n)	=ËÅ∑Ê•≠ÁîüÊ∂Ø

‚óéParagraph 2
sign a contract	=Á∞ΩÁ¥Ñ
worth (+ $)	=ÂÉπÂÄº(Â§öÂ∞ëÈå¢)
deal (n)	=‰∫§Êòì
prove (v)	=Ë≠âÊòé(v)
worth (n)	=ÂÉπÂÄº(Ôºùvalue)
deliver (v)	=ÂÖåÁèæ(ÊâøË´æ)
nothing short of...	= [ÁâáË™û] Á∞°Áõ¥ÊòØ‚Ä¶
incredible (adj)	=Èõ£‰ª•ÁΩÆ‰ø°ÁöÑ„ÄÅÂæàÊ£íÁöÑ
achieve (v)	=ÈÅîÊàê„ÄÅÂØ¶Áèæ
historic (adj)	=Ê≠∑Âè≤ÊÄßÁöÑ
record (n)	=Ë®òÈåÑ
on top of...	=Èô§‰∫Ü‚Ä¶‰πãÂ§ñ(Ôºùbesides‚Ä¶, in addition to‚Ä¶)
championship (n)	=ÂÜ†ËªçÈ†≠Èäú

‚óéParagraph 3
success (n)	=ÊàêÂäü(n)
recently (adv)	=ÊúÄËøë
private (adj)	=ÁßÅ‰∫∫ÁöÑ
spotlight (n)	=ËÅöÂÖâÁáàÔºåÊ≥®ÁõÆ
announcement (n)	=ÂÖ¨Âëä„ÄÅÂÆ£‰Ωà
rare (adj)	=ÁΩïË¶ãÁöÑ
rather than	=ËÄå‰∏çÊòØ


`,

    liveU52: `
Live U5  Shohei Ohtani Â§ßË∞∑ÁøîÂπ≥ May 13


‚óéParagraph 1
smooth (adj)	=È†ÜÂà©ÁöÑ
..., though. 	=[ÊîæÂè•Â∞æ] ‰∏çÈÅéÔºåÁÑ∂ËÄå
former (adj)	=Ââç‰ªªÁöÑ
interpreter (n)	=Âè£Ë≠ØÂì°
be accused of...	=Ë¢´ÊåáÊéß...
fuel (n)	=ÁáÉÊñô
fuel (v)	=ÊøÄËµ∑ÔºåÂºïÁôº
gamble (v)	=Ë≥≠Âçö
perform well	=Ë°®ÁèæÂ•Ω
perform poorly = Ë°®ÁèæÂ∑Æ
incredibly (adv)	=Èõ£‰ª•ÁΩÆ‰ø°Âú∞


‚óéParagraph 2
be central to...	=ÊòØ...ÁöÑÊ†∏ÂøÉ
method (n)	=ÊñπÊ≥ï
technique (n)	=ÊäÄÂ∑ß
middle school	=(ÁæéÂúãÁöÑ)Âúã‰∏≠(vs. high schoolÈ´ò‰∏≠)
emphasize (v)	=Âº∑Ë™ø
rely on...	=‰æùÈù†...
self-reliance (n)	=Ëá™ÂäõÊõ¥Áîü
recommend (v)	=Êé®Ëñ¶
chart (n)	=ÂúñË°®
goal (n)	=ÁõÆÊ®ô
include (v)	=ÂåÖÂê´
aim (n)	=ÁõÆÊ®ôÔºåÂÆóÊó®(Ôºùgoal)
as well as...	=‰ª•Âèä...
caring (adj)	=ÊúâÊÑõÂøÉÁöÑ

‚óéParagraphs 3 and 4
drive (n)	=È≠ÑÂäõ„ÄÅÂππÂãÅ
connect with someone	=Ëàá...Âª∫Á´ãËâØÂ•ΩÈóú‰øÇ
youth (n)	=ÈùíÂπ¥„ÄÅÂπ¥Ëºï‰∫∫
in a... way	=‰ª•...ÁöÑÊñπÂºè
represent (v)	=‰ª£Ë°®
dedication (n)	=ÊäïÂÖ•ÔºåÂ•âÁçª
effort (n)	=Âä™Âäõ
as such	=Âõ†Ê≠§(Ôºùtherefore, thus)
motivate (v)	=ÊøÄÂãµ
athlete (n)	=ÈÅãÂãïÂì°
pursue your dream	=ËøΩÊ±Ç‰Ω†ÁöÑÂ§¢ÊÉ≥
feature (v)	=‰ª•...ÁÇ∫ÁâπËâ≤
do something in person	=Ë¶™Ëá™ÂÅöÊüê‰∫ã
once again	=ÂÜç‰∏ÄÊ¨°


`,

    coreU16: `
Ê†∏ÂøÉÂñÆU16

perfume (n) = È¶ôÊ∞¥
develop (v) = 1.ÁôºÂ±ï 2.ÈñãÁôº 3.Ê¥ó(ÁÖßÁâá)
pleasant (adj) = ‰ª§‰∫∫ÊÑâÊÇÖÁöÑ„ÄÅÂÆú‰∫∫ÁöÑ
expand (v) = Êì¥Â±ï
possibility (n) = ÂèØËÉΩÊÄß
entry (n) = 1.ÈÄ≤ÂÖ• 2.Ê¢ùÁõÆ(Â¶ÇÔºöa dictionary entry)
spray (v) = Âô¥ÁÅëÔºõÂô¥Èúß
amount (n) = Êï∏Èáè
blend (v) = Ê∑∑Âêà
outcome (n) = ÁµêÊûú(Ôºùresult)
concept (n) = Ê¶ÇÂøµ
shift (n) = 1.ËΩâËÆä„ÄÅÊîπËÆä 2.Ëº™Áè≠(Â¶ÇÔºöday/night shift Êó•/Â§úÁè≠)
conventional (adj) = ÂÇ≥Áµ±ÁöÑ„ÄÅ‰æùÁÖßÂ∏∏Ë¶èÁöÑ
overcome (v) = ÂÖãÊúç
boldness (n) = Â§ßËÜΩ
favorable (adj) = 1.Áç≤ÂæóËÆöË®±ÁöÑ 2.ÊúâÂà©ÁöÑ
review (n) = 1.Ë©ïË´ñ 2.Ë§áÁøí
rumor (n) = Ë¨†Ë®Ä
It is rumored that... / Rumor has it that... = Ë¨†ÂÇ≥...
deliver (v) = ÈÅãÈÄÅ„ÄÅÈÅûÈÄÅ

`,

    coreU17: `
Ê†∏ÂøÉÂñÆU17

specific (adj) = 1.ÁâπÂÆöÁöÑ 2.Á¢∫ÂàáÁöÑ(vs. general Á±†Áµ±ÁöÑ)
analyze (v) = ÂàÜÊûê
location (n) = ‰ΩçÁΩÆ
remote (adj) = ÂÅèÈÅ†ÁöÑ
recognize (v) = Ë™çÂá∫ÔºõËæ®Ë≠ò
harmony (n) = ÂíåË´ß
determine (v) = 1.Ê±∫ÂÆö„ÄÅÂΩ±Èüø 2.Âà§ÂÆö„ÄÅÁ¢∫ÂÆö
accuracy (n) = Ê∫ñÁ¢∫
vary (v) = ÊúâÂ∑ÆÁï∞„ÄÅ‰∏çÂêå
various (adj) = ÂêÑÂºèÂêÑÊ®£ÁöÑ(Ôºùmany different)
rare (adj) = Á®ÄÊúâÁöÑ
rarely (adv) = Âπæ‰πé‰∏ç(Ôºùseldom, almost never)
occasion (n) = Â†¥Âêà„ÄÅÊôÇÊ©ü
cooperate (v) = Âêà‰Ωú
exchange (v, n) = ‰∫§Êèõ
ignore (v) = ÂøΩË¶ñ
function = (n)ÂäüËÉΩ  (v)Ëµ∑‰ΩúÁî®
territory (n) = È†òÂúü
survive (v) = ÁîüÂ≠ò
identify (v) = 1.Ë≠òÂà•(Ë∫´‰ªΩ)  2.ÁôºÁèæ„ÄÅÊâæÂá∫(Ôºùfind out)
evidence (n) = Ë≠âÊìö
capacity (n) = 1.ËÉΩÂäõ(Ôºùability) 2.ÂÆπÁ¥ç‰∫∫Êï∏
demonstrate (v) = Á§∫ÁØÑ
scratch (v) = Êäì„ÄÅÊêî


`,

    coreU18: `
Ê†∏ÂøÉÂñÆU18

cinema (n) = 1.ÈõªÂΩ±Èô¢(Ôºùmovie theater)  2.ÈõªÂΩ±Ê•≠
essential (adj) = ÂøÖË¶ÅÁöÑ
entertainment (n) = Â®õÊ®Ç
direct (v) = 1.ÊåáÊèÆ„ÄÅÈ†òÂ∞é 2.Âü∑Â∞é(ÈõªÂΩ±)
silence (n) = ÂØÇÈùú
fair (n) = ÂúíÈÅäÊúÉ(school fair)„ÄÅÂ∏ÇÈõÜ„ÄÅÂ±ïË¶ΩÊúÉ(book fair, car fair)
fair (adj) = ÂÖ¨Âπ≥ÁöÑ
stage (n) = 1.ËàûÂè∞ 2.ÈöéÊÆµ
inventor (n) = ÁôºÊòéÂÆ∂
proper (adj) = ÈÅ©Áï∂ÁöÑ
decade (n) = ÂçÅÂπ¥
nearly (adv) = Âπæ‰πé„ÄÅÂ∞áËøë
dialogue (n) = Â∞çË©±
creativity (n) = ÂâµÈÄ†Âäõ
career (n) = ËÅ∑Ê∂Ø„ÄÅ‰∫ãÊ•≠
fame (n) = ÂêçËÅ≤
hardship (n) = Âõ∞Ëã¶
dramatically (adv) = 1.Êà≤ÂäáÊÄßÂú∞ 2.Â§ßÂπÖÂú∞
switch (v) = ËΩâÊèõ
light switch (n) = ÈõªÁáàÈñãÈóú
emergence (n) = Âá∫Áèæ„ÄÅËààËµ∑

`,

    other1: `


`,
other2: `

`

};







// Add event listeners to all preset buttons
document.querySelectorAll('.preset-btn').forEach(button => {
    button.addEventListener('click', () => {
        const presetKey = button.dataset.preset;
        if (presetVocabulary[presetKey]) {
            textImportContent.value = presetVocabulary[presetKey];
        }
    });
});

        // Text Import Submit button click handler
        textImportSubmitBtn.addEventListener('click', () => {
            const text = textImportContent.value.trim();
            if (!text) {
                alert('Ê¨Ñ‰Ωç‰∏≠Ê≤íÊúâÂèØ‰æõÂåØÂÖ•ÁöÑË≥áÊñôÔºåË´ãËá™Ë°åËº∏ÂÖ•‰∏≠Ëã±ÊñáÈÖçÂ∞ç(Â¶ÇÔºöEnglish = Ëã±Êñá)ÔºåÊàñÈªûÈÅ∏È†êË®≠ÁöÑÂñÆÂ≠óË°®„ÄÇ');
                return;
            }
            
            processTextImport(text);
            textImportModal.style.display = 'none';
        });

// Text Import Clear button click handler
textImportClearBtn.addEventListener('click', () => {
    textImportContent.value = '';
});

        
function processTextImport(text) {
    vocabularyData = [];
    const lines = text.split('\n');
    
    let currentSection = "Default";
    
    for (let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        if (!line) continue;
        
        // Check if this is a section header
        if (line.includes('‚óé') || line.includes('*') || line.startsWith('*')) {
            currentSection = line.replace('‚óé', '').replace('*', '').replace('*', '').trim();
            continue;
        }
        
        const parts = line.split('=');
        if (parts.length < 2) continue;
        
        const vocabulary = parts[0].trim();
        const translation = parts[1].trim();
        
        if (vocabulary && translation) {
            vocabularyData.push({
                vocabulary: vocabulary,
                translation: translation,
                selected: true,
                section: currentSection
            });
        }
    }
    
    renderVocabularyTable();
    if (vocabularyData.length > 0) {
        startBtn.disabled = false;
multipleChoiceBtn.disabled = false; // Êñ∞Â¢ûÈÄô‰∏ÄË°å
    }
}

      
// Copy button click handler
const textImportCopyBtn = document.getElementById('text-import-copy-btn');

textImportCopyBtn.addEventListener('click', () => {
    const textToCopy = textImportContent.value;
    if (!textToCopy) {
        alert('No text to copy.');
        return;
    }
    
    // Copy text to clipboard
    navigator.clipboard.writeText(textToCopy)
        .then(() => {
            // Provide visual feedback
            const originalText = textImportCopyBtn.textContent;
            textImportCopyBtn.textContent = 'Copied!';
            
            // Revert button text after a short delay
            setTimeout(() => {
                textImportCopyBtn.textContent = originalText;
            }, 1500);
        })
        .catch(err => {
            console.error('Failed to copy text: ', err);
            alert('Failed to copy text. Please try again.');
        });
});
       

        function renderVocabularyTable() {
    if (vocabularyData.length === 0) {
        vocabularyBody.innerHTML = '<tr><td colspan="3" class="no-data">Import your vocabulary list to get started</td></tr>';
        return;
    }
    
    vocabularyBody.innerHTML = '';
    
    // Group items by section
    const sectionMap = {};
    vocabularyData.forEach(item => {
        if (!sectionMap[item.section]) {
            sectionMap[item.section] = [];
        }
        sectionMap[item.section].push(item);
    });
    
    // Render each section
    Object.keys(sectionMap).forEach(sectionName => {
        const sectionItems = sectionMap[sectionName];
        
        // Add section header row
        const sectionRow = document.createElement('tr');
        sectionRow.className = 'section-header';
        
        const sectionCell = document.createElement('td');
        sectionCell.colSpan = 2;
        sectionCell.textContent = sectionName;
        sectionCell.style.fontWeight = 'bold';
        sectionCell.style.backgroundColor = 'var(--dark)';
        sectionCell.style.color = 'var(--light)';
        sectionCell.style.padding = '10px 15px';
        
        const sectionCheckCell = document.createElement('td');
        const sectionCheckbox = document.createElement('input');
        sectionCheckbox.type = 'checkbox';
        sectionCheckbox.checked = sectionItems.every(item => item.selected);
        sectionCheckbox.dataset.section = sectionName;
        sectionCheckbox.addEventListener('change', (e) => {
            const isChecked = e.target.checked;
            const section = e.target.dataset.section;
            
            // Update all items in this section
            vocabularyData.forEach((item, index) => {
                if (item.section === section) {
                    item.selected = isChecked;
                    // Also update the displayed checkboxes
                    const checkbox = document.querySelector(`input[data-index="${index}"]`);
                    if (checkbox) checkbox.checked = isChecked;
                }
            });
            
            updateSelectAllCheckbox();
        });
        
        sectionCheckCell.appendChild(sectionCheckbox);
        sectionRow.appendChild(sectionCell);
        sectionRow.appendChild(sectionCheckCell);
        vocabularyBody.appendChild(sectionRow);
        
        // Add vocabulary items for this section
        sectionItems.forEach((item, localIndex) => {
            const index = vocabularyData.findIndex(vItem => 
                vItem.vocabulary === item.vocabulary && 
                vItem.translation === item.translation);
            
            const row = document.createElement('tr');
            
            // Vocabulary column with speaker
            const wordCell = document.createElement('td');
            const cleanWord = item.vocabulary.replace(/\(.*\)/g, '').trim();
            
            wordCell.innerHTML = `
                ${item.vocabulary}
                <span class="speaker-icon" title="Listen" data-word="${cleanWord}">üîä</span>
            `;
            
            // Translation column
            const translationCell = document.createElement('td');
            translationCell.textContent = item.translation;
            
            // Checkbox column
            const checkboxCell = document.createElement('td');
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.checked = item.selected;
            checkbox.dataset.index = index;
            checkbox.dataset.section = item.section;
            checkbox.addEventListener('change', (e) => {
                vocabularyData[index].selected = e.target.checked;
                updateSectionCheckbox(item.section);
                updateSelectAllCheckbox();
            });
            checkboxCell.appendChild(checkbox);
            
            row.appendChild(wordCell);
            row.appendChild(translationCell);
            row.appendChild(checkboxCell);
            vocabularyBody.appendChild(row);
        });
    });
    
    // Add event listeners to speaker icons
    document.querySelectorAll('.speaker-icon').forEach(icon => {
        icon.addEventListener('click', (e) => {
            const word = e.target.dataset.word;
            speak(word);
        });
    });
    
    updateSelectAllCheckbox();
}


function updateSectionCheckbox(sectionName) {
    const sectionItems = vocabularyData.filter(item => item.section === sectionName);
    const allSelected = sectionItems.every(item => item.selected);
    const noneSelected = sectionItems.every(item => !item.selected);
    
    const sectionCheckbox = document.querySelector(`input[data-section="${sectionName}"]`);
    if (sectionCheckbox) {
        sectionCheckbox.checked = allSelected;
        sectionCheckbox.indeterminate = !allSelected && !noneSelected;
    }
}








        // modify the Update "Select All" checkbox state
        
function updateSelectAllCheckbox() {
    if (vocabularyData.length === 0) {
        selectAllCheckbox.checked = false;
        selectAllCheckbox.indeterminate = false;
        return;
    }
    
    const selectedCount = vocabularyData.filter(item => item.selected).length;
    
    if (selectedCount === 0) {
        selectAllCheckbox.checked = false;
        selectAllCheckbox.indeterminate = false;
    } else if (selectedCount === vocabularyData.length) {
        selectAllCheckbox.checked = true;
        selectAllCheckbox.indeterminate = false;
    } else {
        selectAllCheckbox.checked = false;
        selectAllCheckbox.indeterminate = true;
    }
}

//Update the global "Select All" checkbox handler
       selectAllCheckbox.addEventListener('change', (e) => {
    const isChecked = e.target.checked;
    
    vocabularyData.forEach(item => {
        item.selected = isChecked;
    });
    
    document.querySelectorAll('#vocabulary-body input[type="checkbox"]').forEach(checkbox => {
        checkbox.checked = isChecked;
        if (checkbox.dataset.section) {
            checkbox.indeterminate = false;
        }
    });
});

        // Start Quiz button handler
        startBtn.addEventListener('click', () => {
            currentQuizWords = vocabularyData.filter(item => item.selected);
            
            if (currentQuizWords.length === 0) {
                alert('Ëá≥Â∞ëÂãæÈÅ∏ 1ÂÄãÂñÆÂ≠ó ÊâçËÉΩÈñãÂßãÊ≠§Ê∏¨È©óÔºÅ');
                return;
            }
            
            startQuiz();
        });

        // Start the quiz
        function startQuiz() {
            resetQuiz();
            quizModal.style.display = 'flex';
            nextQuestion();
        }

        // Reset quiz state
        function resetQuiz() {
            currentWordIndex = -1;
            currentWord = null;
            answerInput.value = '';
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
            hintTextEl.textContent = '';
            revealAnswerEl.textContent = '';
        }

        // Load the next question
        function nextQuestion() {
            // Reset UI elements
            answerInput.value = '';
            feedbackEl.textContent = '';
            feedbackEl.className = 'feedback';
            hintTextEl.textContent = '';
            revealAnswerEl.textContent = '';
            
            // Randomly select next word
            const previousIndex = currentWordIndex;
            
            // If only one word, just use it
            if (currentQuizWords.length === 1) {
                currentWordIndex = 0;
            } else {
                // Make sure we don't get the same word twice in a row
                do {
                    currentWordIndex = Math.floor(Math.random() * currentQuizWords.length);
                } while (currentWordIndex === previousIndex && currentQuizWords.length > 1);
            }
            
            currentWord = currentQuizWords[currentWordIndex];
            translationPrompt.textContent = currentWord.translation;
        }

        // Submit answer
        function submitAnswer() {
    if (!currentWord) return;
    
    const userAnswer = answerInput.value.trim().toLowerCase();
    // Split the vocabulary by slash and clean each option
    const correctAnswers = currentWord.vocabulary
        .split('/')
        .map(ans => ans.replace(/\(.*?\)/g, '').trim().toLowerCase());
    
    // Normalize user answer (remove punctuation)
    const normalizedUserAnswer = userAnswer.replace(/[.,?'‚Äô‚Ä¶\/#!$%\^&\*;:{}=\-_`~()]/g, "");
    
    // Check if user's answer matches any of the correct options
    const isCorrect = correctAnswers.some(answer => {
        const normalizedAnswer = answer.replace(/[.,?'‚Äô‚Ä¶\/#!$%\^&\*;:{}=\-_`~()]/g, "");
        return normalizedUserAnswer === normalizedAnswer;
    });
    
    if (isCorrect) {
        feedbackEl.textContent = 'Well done! üèÜüòäüëç';
        feedbackEl.className = 'feedback correct';
        speak('Well done!');
    } else {
        feedbackEl.textContent = 'Try again! üî•üî•üî•';
        feedbackEl.className = 'feedback incorrect';
        speak('Try again!');
    }
}

        // Show hint
        function showHint() {
            if (!currentWord) return;
            
            const correctAnswer = currentWord.vocabulary.replace(/\(.*?\)/g, '').trim();
            const firstLetter = correctAnswer.charAt(0).toUpperCase();
            
            hintTextEl.textContent = `The answer starts with the letter ${firstLetter}.`;
        }

        // Show answer
        function showAnswer() {
            if (!currentWord) return;
            
            const correctAnswer = currentWord.vocabulary.replace(/\(.*?\)/g, '').trim();
            revealAnswerEl.textContent = `${correctAnswer}`;
            speak(correctAnswer);
        }

        // Event Listeners for Quiz Modal
        submitBtn.addEventListener('click', submitAnswer);
        
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitAnswer();
            }
        });
        
        speakBtn.addEventListener('click', () => {
            if (!recognition) {
                alert('Speech recognition is not supported in your browser.');
                return;
            }
            
            try {
                if (speakBtn.textContent === 'üé§ Speak') {
                    recognition.start();
                    speakBtn.textContent = 'Recording';
                    speakBtn.classList.add('recording');
                } else {
                    recognition.stop();
                    speakBtn.textContent = 'üé§ Speak';
                    speakBtn.classList.remove('recording');
                }
            } catch (error) {
                console.error('Speech recognition error:', error);
                speakBtn.textContent = 'üé§ Speak';
                speakBtn.classList.remove('recording');
            }
        });
        
        hintBtn.addEventListener('click', showHint);
        
        answerBtn.addEventListener('click', showAnswer);
        
        nextBtn.addEventListener('click', nextQuestion);
        
        closeBtn.addEventListener('click', () => {
            quizModal.style.display = 'none';
            if (recognition) {
                recognition.stop();
            }
        });

// Á¨¨‰∏ÉÊ≠•ÔºöÊñ∞Â¢ûÂ§öÈÅ∏È°åÊåâÈàï‰∫ã‰ª∂Áõ£ËÅΩÂô®
multipleChoiceBtn.addEventListener('click', () => {
  currentQuizWords = vocabularyData.filter(item => item.selected);
  if (currentQuizWords.length < 4) {
    alert('Ëá≥Â∞ëÂãæÈÅ∏ 4ÂÄãÂñÆÂ≠ó ÊâçËÉΩÈñãÂßãÊ≠§Ê∏¨È©óÔºÅ');
    return;
  }
  startMultipleChoiceQuiz();
});

// Á¨¨ÂÖ´Ê≠•ÔºöÊñ∞Â¢ûÂ§öÈÅ∏È°å‰∏ªË¶ÅÂäüËÉΩÂáΩÊï∏
function startMultipleChoiceQuiz() {
  resetMultipleChoiceQuiz();
  multipleChoiceModal.style.display = 'flex';
  nextMultipleChoiceQuestion();
}

function resetMultipleChoiceQuiz() {
  currentMCWord = null;
  selectedChoice = '';
  correctChoice = '';
  mcFeedbackEl.textContent = '';
  mcFeedbackEl.className = 'feedback';
  mcRevealAnswerEl.textContent = '';
  choiceOptions.innerHTML = '';
}

function nextMultipleChoiceQuestion() {
  // ÈáçÁΩÆUIÂÖÉÁ¥†
  mcFeedbackEl.textContent = '';
  mcFeedbackEl.className = 'feedback';
  mcRevealAnswerEl.textContent = '';
  selectedChoice = '';

  // Èö®Ê©üÈÅ∏Êìá‰∏ÄÂÄãÂñÆÂ≠ó
  const randomIndex = Math.floor(Math.random() * currentQuizWords.length);
  currentMCWord = currentQuizWords[randomIndex];
  
  // Ê∏ÖÁêÜ‰∏¶È°ØÁ§∫vocabulary
  const cleanVocab = currentMCWord.vocabulary.replace(/\(.*?\)/g, '').trim();
  vocabularyPrompt.textContent = cleanVocab;
  correctChoice = currentMCWord.translation;

  // ÁîüÊàêÈÅ∏È†Ö
  generateChoices();
}

function generateChoices() {
  // Áç≤ÂèñÊ≠£Á¢∫Á≠îÊ°à
  const correctAnswer = currentMCWord.translation;
  
  // Áç≤ÂèñÂÖ∂‰ªñ3ÂÄãÈåØË™§ÈÅ∏È†Ö
  const otherWords = currentQuizWords.filter(word => word.translation !== correctAnswer);
  const wrongChoices = [];
  
  while (wrongChoices.length < 3 && wrongChoices.length < otherWords.length) {
    const randomWord = otherWords[Math.floor(Math.random() * otherWords.length)];
    if (!wrongChoices.includes(randomWord.translation)) {
      wrongChoices.push(randomWord.translation);
    }
  }
  
  // ÁµÑÂêàÊâÄÊúâÈÅ∏È†Ö‰∏¶Êâì‰∫ÇÈ†ÜÂ∫è
  const allChoices = [correctAnswer, ...wrongChoices];
  const shuffledChoices = allChoices.sort(() => Math.random() - 0.5);
  
  // ÁîüÊàêÈÅ∏È†ÖHTML
  choiceOptions.innerHTML = '';
  shuffledChoices.forEach((choice, index) => {
    const optionDiv = document.createElement('div');
    optionDiv.className = 'choice-option';
    optionDiv.textContent = choice;
    optionDiv.dataset.choice = choice;
    
    optionDiv.addEventListener('click', () => selectChoice(choice, optionDiv));
    
    choiceOptions.appendChild(optionDiv);
  });
}

function selectChoice(choice, optionElement) {
  // Â¶ÇÊûúÂ∑≤Á∂ìÈÅ∏ÊìáÈÅéÔºå‰∏çÂÖÅË®±ÂÜçÈÅ∏
  if (selectedChoice) return;
  
  selectedChoice = choice;
  
  // Á¶ÅÁî®ÊâÄÊúâÈÅ∏È†Ö
  document.querySelectorAll('.choice-option').forEach(option => {
    option.classList.add('disabled');
  });
  
  // Ê®ôË®òÈÅ∏‰∏≠ÁöÑÈÅ∏È†Ö
  optionElement.classList.add('selected');
  
  // Ê™¢Êü•Á≠îÊ°à
  if (choice === correctChoice) {
    optionElement.classList.add('correct');
    mcFeedbackEl.textContent = 'Nice shot! ‚úÖüèÄüß∫üòä';
    mcFeedbackEl.className = 'feedback correct';
    speak('Nice shot!');
  } else {
    optionElement.classList.add('incorrect');
    // È°ØÁ§∫Ê≠£Á¢∫Á≠îÊ°à
    document.querySelectorAll('.choice-option').forEach(option => {
      if (option.dataset.choice === correctChoice) {
        option.classList.add('correct');
      }
    });
    mcFeedbackEl.textContent = 'You missed! ‚ùåüèÄüí•üò§';
    mcFeedbackEl.className = 'feedback incorrect';
    speak('You missed!');
  }
}

function showMCAnswer() {
  if (!currentMCWord) return;
  
  mcRevealAnswerEl.textContent = `Correct answer: ${correctChoice}`;
  
  // È´ò‰∫ÆÊ≠£Á¢∫Á≠îÊ°à
  document.querySelectorAll('.choice-option').forEach(option => {
    if (option.dataset.choice === correctChoice) {
      option.classList.add('correct');
    }
    option.classList.add('disabled');
  });
  
  selectedChoice = correctChoice; // Èò≤Ê≠¢ÂÜçÊ¨°ÈÅ∏Êìá
}

// Á¨¨‰πùÊ≠•ÔºöÊñ∞Â¢û‰∫ã‰ª∂Áõ£ËÅΩÂô®
vocabSpeaker.addEventListener('click', () => {
  if (currentMCWord) {
    const cleanVocab = currentMCWord.vocabulary.replace(/\(.*?\)/g, '').trim();
    speak(cleanVocab);
  }
});

mcNextBtn.addEventListener('click', nextMultipleChoiceQuestion);

mcCloseBtn.addEventListener('click', () => {
  multipleChoiceModal.style.display = 'none';
});

// Date information display
function updateDateInfo() {
    const dateInfoEl = document.getElementById('date-info');
    
    // Get current date in Taiwan timezone
    const options = { 
        timeZone: 'Asia/Taipei',
        weekday: 'long', 
        month: 'long', 
        day: 'numeric', 
        year: 'numeric'
    };
    const today = new Date();
    const taiwanDate = today.toLocaleDateString('en-US', options);
    
    // Calculate days until ÊÆµËÄÉ
    const examDate = new Date('June 25, 2025');
    examDate.setHours(0, 0, 0, 0);
    const todayNoTime = new Date(today);
    todayNoTime.setHours(0, 0, 0, 0);
    const daysUntilExam = Math.ceil((examDate - todayNoTime) / (1000 * 60 * 60 * 24));
    
    // Calculate days until 115Âπ¥Â≠∏Ê∏¨
    const collegeExamDate = new Date('January 16, 2026');
    collegeExamDate.setHours(0, 0, 0, 0);
    const daysUntilCollegeExam = Math.ceil((collegeExamDate - todayNoTime) / (1000 * 60 * 60 * 24));
    
    // Update the HTML - each item on separate line
    dateInfoEl.innerHTML = `
        <span><span class="emoji">üìÖ</span>${taiwanDate}</span><br>
        <span><span class="emoji">‚è∞</span><span class="countdown">${daysUntilExam}</span> days until ÊÆµËÄÉ</span>
        <span><span class="emoji">üìö</span><span class="countdown">${daysUntilCollegeExam}</span> days until 115Âπ¥Â≠∏Ê∏¨</span>
    `;
}


// Update date information when page loads
updateDateInfo();

// Update date information every minute
setInterval(updateDateInfo, 60000);

    </script>

<footer class="visitor-counter">
    <div id="visitor-count">üë• Loading visitor count...</div>
</footer>

<div id="refresh-reminder-popup" class="popup-container">
  <div class="popup-content">
    <div class="popup-layout">
      <div class="pikachu-image">
        <img src="dodoro_transparent.png" alt="Image Not Found" width="150">
      </div>
      <div class="speech-bubble">
        <p class="english-text">1.ÈªûÊìä„ÄåÈáçÊñ∞Êï¥ÁêÜ(refresh)„ÄçüîÑ ‰ª•Áç≤ÂèñÊõ¥Êñ∞ÔºÅ</p>
       
        <p class="chinese-text">2.Ëã•ÊâãÊ©ü‰∏äÁöÑüîäÁÑ°Ê≥ïÈÅã‰ΩúÔºåË°®Á§∫„ÄåÊñáÂ≠óËΩâË™ûÈü≥„ÄçÂäüËÉΩÁ∂ìÈÅéÊõ¥Êñ∞ÔºåÈáçÈñãÊ©üÂç≥ÂèØËß£Ê±∫„ÄÇ</p>

        <p class="chinese-text">3.Êú¨Á∂≤È†Å‰ΩøÁî®WindowsÁ≥ªÁµ±ÈñãÁôºÔºåËºÉÈÅ©ÂêàAndroidÁ≥ªÁµ±ÁöÑÊâãÊ©üÔºåÊüê‰∫õiPhoneÊúÉÊúâüîäÁï∞Â∏∏ÂïèÈ°åÔºåÊú™‰æÜÊúÉË®≠Ê≥ïËß£Ê±∫„ÄÇ</p>

      </div>
    </div>
    <button id="close-reminder-btn" class="close-reminder-btn">OK. I got it.</button>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<!-- Add this to the end of your existing <script> section -->
<script>
    // Firebase visitor counter
    function initVisitorCounter() {
        // Your Firebase configuration - REPLACE WITH YOUR ACTUAL VALUES
        const firebaseConfig = {
            apiKey: "AIzaSyBFhmaAZmBtsM5DKoxgy1G-RouRKsrjYsA",
            authDomain: "vocab-builder-visitor-counter.firebaseapp.co",
            databaseURL: "https://vocab-builder-visitor-counter-default-rtdb.asia-southeast1.firebasedatabase.app/",
            projectId: "vocab-builder-visitor-counter",
            storageBucket: "vocab-builder-visitor-counter.firebasestorage.app",
            messagingSenderId: "648587683861",
            appId: "1:648587683861:web:dcb777160dabb4cbf8c61c"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Get today's date in YYYY-MM-DD format in Taiwan timezone
        const today = new Date();
        const taiwanDate = new Date(today.toLocaleString('en-US', { timeZone: 'Asia/Taipei' }));
        const dateStr = taiwanDate.getFullYear() + '-' + 
                       (taiwanDate.getMonth() + 1).toString().padStart(2, '0') + '-' + 
                       taiwanDate.getDate().toString().padStart(2, '0');

        // Reference to today's visitor count
        const visitorCountRef = database.ref('visitorCount/' + dateStr);

        // Function to update visitor display
        function updateVisitorDisplay(count) {
            const visitorCountEl = document.getElementById('visitor-count');
            if (count === 1) {
                visitorCountEl.innerHTML = `üëã  ${count} person has visited this website today.`;
            } else {
                visitorCountEl.innerHTML = `üëã  ${count} people have visited this website today.`;
            }
        }

        // Check if this browser has already been counted today
        const hasVisitedToday = localStorage.getItem('visited_' + dateStr);
        
        if (!hasVisitedToday) {
            // Increment the count using a transaction
            visitorCountRef.transaction((currentCount) => {
                return (currentCount || 0) + 1;
            }, (error, committed, snapshot) => {
                if (error) {
                    console.error('Transaction failed:', error);
                } else if (committed) {
                    // Mark this browser as counted for today
                    localStorage.setItem('visited_' + dateStr, 'true');
                    updateVisitorDisplay(snapshot.val());
                }
            });
        } else {
            // Just get the current count without incrementing
            visitorCountRef.once('value', (snapshot) => {
                const count = snapshot.val() || 0;
                updateVisitorDisplay(count);
            });
        }

        // Listen for count changes
        visitorCountRef.on('value', (snapshot) => {
            const count = snapshot.val() || 0;
            updateVisitorDisplay(count);
        });
    }

    // Call the function to initialize the visitor counter
    try {
        initVisitorCounter();
    } catch (e) {
        console.error("Error initializing visitor counter:", e);
        document.getElementById('visitor-count').innerHTML = "üòÖ Visitor count unavailable";
    }

// Refresh Reminder Popup functionality
document.addEventListener('DOMContentLoaded', () => {
  // Show the popup when the page loads
  const refreshReminderPopup = document.getElementById('refresh-reminder-popup');
  
  // Show popup after a slight delay for better user experience
  setTimeout(() => {
    refreshReminderPopup.style.display = 'flex';
  }, 1000);
  
  // Add event listener to close button
  const closeReminderBtn = document.getElementById('close-reminder-btn');
  closeReminderBtn.addEventListener('click', () => {
    refreshReminderPopup.style.display = 'none';
  });
});

</script>


</body>
</html>
